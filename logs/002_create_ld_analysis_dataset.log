---------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\emsuewil\Documents\Work\Covid\OpenSAFELY\Absolute_risks\absolute-risks-covid-research\logs/002_create_ld_analysis
> _dataset.log
  log type:  text
 opened on:  11 Feb 2021, 11:50:43

. 
. * Wave 1: i=1  (1 Mar 20 - 31 Aug 20) 
. * Wave 2: i=2  (1 Sept 20 - latest)
. forvalues i = 1 (1) 2 {
  2. 
.         * Open data
.         use "analysis/data_base_cohort`i'.dta", clear 
  3. 
.         * Index date
.         if `i'==1 {
  4.                 local index_date = "2020-03-01"
  5.         }
  6.         else if `i'==2 {
  7.                 local index_date = "2020-09-01"     
  8.         }
  9.         
.         * Display the input parameter (index date for cohort)
.         noi di "`index_date'"
 10.         local index = date(subinstr("`index_date'", "-", "/", .), "YMD")
 11.         noi di `index'
 12. 
. 
. 
.         **************************
.         *  Categorise variables  *
.         **************************
. 
. 
.         /*  Age variables  */ 
. 
.         * Create categorised age
.         recode  age                      0/15.9999=1    ///
>                                                         16/44.9999=2    ///
>                                                         45/64.9999=3    ///
>                                                         65/69.9999=4    ///
>                                                         70/74.9999=5    ///
>                                                         75/79.9999=6    ///
>                                                         80/max=7,               ///
>                                                         gen(agegroup) 
 13. 
.         label define agegroup   1 "0-<16"               ///
>                                                         2 "16-<45"              ///
>                                                         3 "45-<65"              ///
>                                                         4 "65-<70"              ///
>                                                         5 "70-<75"              ///
>                                                         6 "75-<80"              ///
>                                                         7 "80+"
 14.         label values agegroup agegroup
 15. 
.         * Check there are no missing ages
.         assert agegroup<.
 16. 
.         * Broader age strata
.         recode agegroup 1=0 2/3=1 4/5=2 6/7=3, gen(agebroad)
 17.         label define agebroad   0 "<16"                 ///
>                                                         1 "16-<65"              ///
>                                                         2 "65-<75"              ///
>                                                         3 "75+"
 18.         label values agebroad agebroad
 19.         
.         *  Age splines          
.         qui summ age
 20.         mkspline age = age, cubic nknots(4)
 21.         order age1 age2 age3, after(age)
 22. 
.         * Child indicator
.         recode age min/15.999999=1 16/max=0, gen(child)
 23. 
. 
. 
.         /*  Body Mass Index  */
. 
.         * Only include child BMI measurements within 2 years
.         replace bmi = . if age<16 & (`index' - bmi_child_date_measured_date) > 365.25*2
 24.         drop bmi_child_date_measured_date
 25. 
.         recode bmi min/39.99999=0 40/max=1, gen(obese40)
 26.         replace obese40 = 0 if bmi>=.
 27.         order obese40, after(bmi)
 28. 
. 
. 
. 
.         /*  IMD  */
. 
.         * Group into 5 groups
.         assert imd_order!=-1
 29.         egen imd = cut(imd_order), group(5) icodes
 30.         replace imd = imd + 1
 31.         replace imd = .u if imd_order>=.
 32.         drop imd_order
 33. 
.         * Reverse the order (so high is more deprived)
.         recode imd 5=1 4=2 3=3 2=4 1=5 .u=.u
 34. 
.         label define imd        1 "1 least deprived"    ///
>                                                 2 "2"                                   ///
>                                                 3 "3"                                   ///
>                                                 4 "4"                                   ///
>                                                 5 "5 most deprived"     ///
>                                                 .u "Unknown"
 35.         label values imd imd 
 36. 
. 
.         /*  Severe asthma   */ 
. 
.         recode asthmacat 3=1 1 2=0, gen(asthma_severe)
 37.         order asthma_severe, after(asthmacat)
 38.         
. 
. 
.         ***************************
.         *  Grouped comorbidities  *
.         ***************************
. 
. 
.         /*  Spleen  */
. 
.         * Spleen problems (dysplenia/splenectomy/etc and sickle cell disease)   
.         egen spleen_date = rowmin(dysplenia_date sickle_cell_date)
 39.         format spleen_date %td
 40.         order spleen_date spleen, after(sickle_cell)
 41.         drop dysplenia_date sickle_cell_date
 42. 
. 
. 
.         /*  Non-haematological malignancies  */
. 
.         gen exhaem_cancer_date = min(lung_cancer_date, other_cancer_date)
 43.         format exhaem_cancer_date %td
 44.         order exhaem_cancer_date, after(other_cancer_date)
 45.         drop lung_cancer_date other_cancer_date
 46. 
.         rename haem_cancer_date         cancerHaem_date
 47.         rename exhaem_cancer_date       cancerExhaem_date
 48. 
.         * Only consider non-haematological malignancies if in previous year
.         gen cancerExhaem1yr = inrange(cancerExhaem_date, `index'- 365.25, `index')
 49.         drop cancerExhaem_date
 50. 
. 
. 
.         /*  Haematological malignancies  */
. 
.         gen     cancerHaem = 4 if                                                                                       ///
>                                 inrange(cancerHaem_date, d(1/1/1900), `index' - 5*365.25)
 51.         replace cancerHaem = 3 if                                                                                       ///
>                                 inrange(cancerHaem_date, `index' - 5*365.25, `index' - 365.25)
 52.         replace cancerHaem = 2 if                                                                                       ///
>                                 inrange(cancerHaem_date, `index' - 365.25,   `index')
 53.         recode  cancerHaem . = 1
 54. 
.         * Label cancer variables
.         capture label drop cancer
 55.         label define cancer 1 "Never"                   ///
>                                                 2 "Last year"           ///
>                                                 3 "2-5 years ago"       ///
>                                                 4 "5+ years"
 56.         label values cancerHaem cancer
 57.                 
. 
.         /*  Immunosuppression  */
. 
.         * Temporary immunodeficiency or aplastic anaemia last year, HIV/permanent
.         *   condition ever
.         gen immunosuppression =                                                                                           ///
>                         (inrange(temp_immuno_date,      `index' - 365.25, `index')      | ///
>                          inrange(aplastic_anaemia_date, `index' - 365.25, `index')      | ///
>                         (perm_immuno_date < `index')                                                            | ///
>                         (hiv_date < `index'))
 58.         drop temp_immuno_date aplastic_anaemia_date perm_immuno_date hiv_date
 59. 
. 
. 
.         /*  Dialysis  */
. 
. 
.         * If transplant since dialysis, set dialysis to no
.         gen dialysis                    = (dialysis_date <.)
 60.         gen transplant_kidney   = (transplant_kidney_date <.)
 61.         replace dialysis = 0   if dialysis == 1                         ///
>                                                         & transplant_kidney     == 1    ///
>                                                         & transplant_kidney_date > dialysis_date 
 62.         order dialysis, after(transplant_kidney_date)
 63.         drop dialysis_date 
 64. 
. 
. 
. 
.         /*  Transplant  */
. 
.         egen transplant_date = rowmin(transplant_kidney_date ///
>                                                                   transplant_notkidney_date)
 65.         drop transplant_kidney_date transplant_notkidney_date
 66.         format transplant_date %td
 67. 
. 
. 
. 
. 
. 
. 
.         **************************
.         *  "Ever" comorbidities  *
.         **************************
. 
.         * Replace dates with binary indicators 
.         foreach var of varlist  respiratory_date                                ///
>                                                         cf_date                                                 ///
>                                                         cardiac_date                                    ///
>                                                         diabetes_date                                   ///
>                                                         af_date                                                 ///
>                                                         dvt_pe_date                                             ///
>                                                         tia_date                                                ///
>                                                         stroke_date                                             ///
>                                                         dementia_date                                   ///
>                                                         neuro_date                                              ///
>                                                         liver_date                                              ///
>                                                         transplant_date                                 ///     
>                                                         spleen_date                                             ///
>                                                         autoimmune_date                                 ///
>                                                         ibd_date                                                ///
>                                                         smi_date                                                ///
>                                                         ldr_date                                                ///
>                                                         ld_profound_date                                ///
>                                                         ds_date                                                 ///
>                                                         cp_date                                                 ///
>                                                 {
 68.                 local newvar =  substr("`var'", 1, length("`var'") - 5)
 69.                 gen `newvar' = (`var'< `index')
 70.                 order `newvar', after(`var')
 71.                 drop `var'
 72.         }
 73. 
. 
. 
. 
. 
. 
.          
. 
.         ************
.         *   eGFR   *
.         ************
. 
. 
.         label define kidneyfn   1 "None"                                        ///
>                                                         2 "Stage 3a/3b egfr 30-60"      ///
>                                                         3 "Stage 4/5 egfr<30"
 74.                                         
.         * Categorise into CKD stages
.         egen egfr_cat = cut(egfr), at(0, 15, 30, 45, 60, 5000)
 75.         recode egfr_cat 0=5 15=4 30=3 45=2 60=0
 76. 
.         * Kidney function 
.         recode egfr_cat 0=1 2/3=2 4/5=3, gen(kidneyfn)
 77.         replace kidneyfn = 1 if egfr==. 
 78.         label values kidneyfn kidneyfn 
 79. 
.         * Delete variables no longer needed
.         drop egfr egfr_cat
 80. 
.         * If either dialysis or kidney transplant then set kidney function to the 
.         *   lowest level
.         replace  kidneyfn = 3 if dialysis                       == 1
 81.         replace  kidneyfn = 3 if transplant_kidney      == 1
 82.         drop transplant_kidney
 83. 
. 
. 
.         ****************************************
.         *   Hba1c:  Level of diabetic control  *
.         ****************************************
. 
.         label define hba1ccat   0 "<6.5%"               ///
>                                                         1">=6.5-7.4"    ///
>                                                         2">=7.5-7.9"    ///
>                                                         3">=8-8.9"              ///
>                                                         4">=9"
 84. 
. 
. 
.         /* Categorise hba1c and diabetes  */
. 
.         * Group hba1c
.         gen     hba1ccat = 0 if hba1c_pct <  6.5
 85.         replace hba1ccat = 1 if hba1c_pct >= 6.5  & hba1c_pct < 7.5
 86.         replace hba1ccat = 2 if hba1c_pct >= 7.5  & hba1c_pct < 8
 87.         replace hba1ccat = 3 if hba1c_pct >= 8    & hba1c_pct < 9
 88.         replace hba1ccat = 4 if hba1c_pct >= 9    & hba1c_pct !=.
 89.         label values hba1ccat hba1ccat
 90. 
.         * Delete unneeded variables
.         drop hba1c_pct 
 91. 
.         * Create diabetes, split by control/not
.         gen     diabcat = 1 if diabetes==0
 92.         replace diabcat = 2 if diabetes==1 & inlist(hba1ccat, 0, 1)
 93.         replace diabcat = 3 if diabetes==1 & inlist(hba1ccat, 2, 3, 4)
 94.         replace diabcat = 4 if diabetes==1 & !inlist(hba1ccat, 0, 1, 2, 3, 4)
 95. 
.         label define diabetes   1 "No diabetes"                         ///
>                                                         2 "Controlled diabetes"         ///
>                                                         3 "Uncontrolled diabetes"       ///
>                                                         4 "Diabetes, no hba1c measure"
 96.         label values diabcat diabetes
 97. 
. 
. 
. 
.         ************************************
.         *  Exposures: learning disability  *
.         ************************************
. 
.         
.         * Split LDR into moderate-mild and severe-profound
.         noi tab ldr ld_profound, m
 98. 
.         gen ldr_cat = ldr
 99.         recode ldr_cat 1=2 if ld_profound==1
100. 
.         label define ldprofound 0 "Not on LDR"  ///
>                                                         1 "LDR, mild"   ///
>                                                         2 "LDR, profound"
101.         label values ldr_cat ldprofound
102. 
. 
.         * Split into in residential care and not
.         noi tab ldr resid_care_ld, m
103. 
.         gen ldr_carecat = ldr
104.         recode ldr 1=2 if resid_care_ld==1
105. 
.         label define ldcare 0 "Not on LDR"                                                      ///
>                                                         1 "LDR, not in residential care"        ///
>                                                         2 "LDR, in residential care"
106.         label values ldr_carecat ldcare
107. 
. 
.         * Combined variable
.         gen     ldr_group = 0
108.         replace ldr_group = 1 if ds==1 & ldr==0
109.         replace ldr_group = 2 if ds==1 & ldr==1
110.         replace ldr_group = 3 if cp==1 & ldr==0
111.         replace ldr_group = 4 if cp==1 & ldr==1
112.         replace ldr_group = 5 if cp==0 & ds==0 & ldr==1
113.         
.         label define ldr_group  0 "No DS, no CP, no LDR"        ///
>                                                         1 "DS but not LDR"                      /// 
>                                                         2 "DS and LDR"                          ///
>                                                         3 "CP but not LDR"                      ///
>                                                         4 "CP and LDR"                          ///
>                                                         5 "LD with no DS or CP" 
114.         label values ldr_group ldr_group
115.         
. 
.         
. 
.         ***************************************
.         *  Binary outcomes and survival time  *
.         ***************************************
. 
. 
.         *** WAVE 1 CENSORING *** 31st August 2020
.         global coviddeathcensor1     = d(31Aug2020)
116.         global covidadmissioncensor1 = d(31Aug2020)
117. 
.         *** WAVE 2 CENSORING *** last outcome date minus 7 days
.         * COVID death
.         noi summ coviddeath_date, format
118.         global coviddeathcensor2 = r(max) - 7
119.                 
.         * COVID hospital admission
.         noi summ covidadmission_date, format
120.         global covidadmissioncensor2 = r(max) - 7
121. 
. 
.         gen coviddeathcensor1     = $coviddeathcensor1
122.         gen covidadmissioncensor1 = $covidadmissioncensor1
123. 
.         gen coviddeathcensor2     = $coviddeathcensor2
124.         gen covidadmissioncensor2 = $covidadmissioncensor2
125. 
.                 
.         * Composite outcome date (either COVID-19 death or hospitalisation)
.         egen composite_date = rowmin(coviddeath_date covidadmission_date)
126.                 
. 
.         /*  Binary outcome and survival time  */
. 
.         * Events prior to index date (shouldn't happen in real data)
.         noi count if coviddeath_date     < `index'
127.         noi count if covidadmission_date < `index'
128.                 
.         forvalues k = 1 (1) 2 {
129.          
.                 * COVID-19 death
.                 gen     coviddeath`k' = (coviddeath_date<.)
130.                 replace coviddeath`k' = 0 if coviddeath_date > coviddeathcensor`k'
131.                 replace coviddeath`k' = 0 if coviddeath_date > otherdeath_date
132. 
.                 * COVID-19 hospitalisation
.                 gen     covidadmission`k' = (covidadmission_date<.)
133.                 replace covidadmission`k' = 0 if covidadmission_date > covidadmissioncensor`k'
134.                 replace covidadmission`k' = 0 if covidadmission_date > coviddeathcensor`k'
135.                 replace covidadmission`k' = 0 if covidadmission_date > coviddeath_date
136.                 replace covidadmission`k' = 0 if covidadmission_date > otherdeath_date
137. 
.                 * Composite (either COVID-19 death or hospitalisation)
.                 gen     composite`k' = (composite_date<.)
138.                 replace composite`k' = 0 if composite_date > covidadmissioncensor`k'
139.                 replace composite`k' = 0 if composite_date > coviddeathcensor`k'
140.                 format composite_date %td
141. 
. 
.                 /*  Calculate survival times  (days until event/censoring)  */
. 
.                 egen stime_coviddeath`k'         = rowmin(coviddeath_date       /// 
>                                                                         otherdeath_date                                 ///
>                                                                         coviddeathcensor`k') 
142.                 egen stime_covidadmission`k' = rowmin(covidadmission_date       ///
>                                                                         coviddeath_date                                 ///
>                                                                         otherdeath_date                                 /// 
>                                                                         covidadmissioncensor`k'                 ///
>                                                                         coviddeathcensor`k')
143.                 egen stime_composite`k'      = rowmin(composite_date            ///
>                                                                         otherdeath_date                                 /// 
>                                                                         covidadmissioncensor`k'                 ///
>                                                                         coviddeathcensor`k')
144. 
.                 drop coviddeathcensor`k' covidadmissioncensor`k' 
145.         }
146.         
.         * Convert to days since index date
.         foreach var of varlist stime* {
147.                 replace `var' = `var' - `index' + 1
148.         }       
149.         
.         * Wave 1: Keep both outcomes (censored at Aug 31, and all time)
.         * Wave 2: Keep only outcome censored at end
.         if `i'==2 {
150.             drop coviddeath1 covidadmission1 composite1 ///
>                         stime_coviddeath1 stime_covidadmission1 stime_composite1
151.         }
152. 
.         
.         
. 
.         *********************
.         *  Label variables  *
.         *********************
. 
. 
.         * Demographics
.         label var patient_id                    "Patient ID"
153.         label var age                                   "Age (years)"
154.         label var age1                                  "Age spline term 1"
155.         label var age2                                  "Age spline term 2"
156.         label var age3                                  "Age spline term 3"
157.         label var agegroup                              "Grouped age"
158.         label var agebroad                              "Broad age strata"
159.         label var child                                 "Child indicator (<16 years)"
160.         label var male                                  "Male"
161.         label var imd                                   "Index of Multiple Deprivation (IMD)"
162.         label var ethnicity_5                   "Ethnicity in 16 categories"
163.         label var stp                                   "Sustainability and Transformation Partnership"
164.         label var stpcode                               "Sustainability and Transformation Partnership"
165.         label var region_7                              "Geographical region (7 England regions)"
166.         label var household_id                  "Household ID"
167.         label var resid_care_old                "Residential care, elderly"
168.         label var resid_care_ldr                "Residential care, learning disability"
169. 
. 
.         * Learning disabilities
.         label var ldr                                   "Learning disability"
170.         label var ld_profound                   "Severe-profound learning disability"
171.         label var ldr_cat                               "Learning disability split into mild-moderate and severe-profound" 
172.         label var ldr_carecat                   "Learning disability split into residential vs non-residential setting" 
173.         label var ds                                    "Down's Syndrome"
174.         label var cp                                    "Cerebral Palsy"
175.         label var ldr_group                             "Grouping of Down's, Cerebral Palsy and learning disability register"
176. 
.         * Confounders and comorbidities 
.         label var bmi                                   "Body Mass Index (BMI, kg/m2)"
177.         label var obese40                               "Evidence of BMI>40"
178.         label var asthma_severe                 "Severe asthma"
179.         label var respiratory                   "Respiratory disease (excl. asthma)"
180.         label var cardiac                               "Heart disease"
181.         label var cf                                    "Cystic Fibrosis (& related)"
182.         label var af                                    "Atrial fibrillation"
183.         label var dvt                                   "Deep vein thrombosis/pulmonary embolism"
184.         label var diabcat                               "Diabetes"
185.         label var tia                                   "Transient ischemic attack"
186.         label var stroke                                "Stroke"
187.         label var dementia                              "Dementia"
188.         label var neuro                                 "Neuro condition other than stroke/dementia"    
189.         label var cancerExhaem1yr               "Non haematological cancer"
190.         label var cancerHaem                    "Haematological cancer"
191.         label var liver                                 "Liver disease"
192.         label var kidneyfn                              "Kidney function"
193.         label var transplant                    "Organ transplant recipient"
194.         label var dialysis                              "Dialysis"
195.         label var spleen                                "Spleen problems (dysplenia, sickle cell)"
196.         label var autoimmune                    "RA, SLE, Psoriasis (autoimmune disease)"
197.         label var immunosuppression             "Conditions causing permanent or temporary immunosuppression"
198.         label var ibd                                   "IBD"
199.         label var smi                                   "Serious mental illness"
200. 
.         * Outcomes 
.         label var  coviddeath_date                      "Date of ONS COVID-19 death"
201.         label var  otherdeath_date                      "Date of ONS non-COVID-19 death"
202.         label var  covidadmission_date          "Date of COVID-19 hospital admission"
203.         label var  composite_date                       "Date of first of COVID-19 hospital admission or death"
204.                         
.         local tag1 = "censored 31 Aug 20"
205.         local tag2 = "censored latest date"
206.         
.         forvalues k = 1 (1) 2 {
207.                 capture label var  coviddeath`k'                        "COVID-19 death (ONS), `tag`k''"
208.                 capture label var  covidadmission`k'            "COVID-19 hospital admission, `tag`k''"
209.                 capture label var  composite`k'                         "COVID-19 hospital admission or death, `tag`k''"
210.                         
.                 capture label var  stime_coviddeath`k'          "Days from study entry until COVID-19 death or censoring, `tag`k''"
211.                 capture label var  stime_covidadmission`k'      "Days from study entry until COVID-19 hospital admission or censor
> ing, `tag`k''"
212.                 capture label var  stime_composite`k'           "Days from study entry until COVID-19 hospital admission or death 
> or censoring, `tag`k''"
213.         }       
214. 
. 
.         *********************
.         *  Order variables  *
.         *********************
. 
.         sort patient_id
215.         order   patient_id stp* region_7 imd                                                            ///
>                         household* resid_care_old resid_care_ldr                                        ///
>                         ldr ldr_cat ld_profound ldr_carecat ds cp ldr_group                     ///
>                         age age age1 age2 age3 agegroup agebroad child male                     ///
>                         bmi* obese* ethnicity*                                                                          /// 
>                         respiratory* asthma_severe* cf* cardiac* diabcat*                       ///
>                         af* dvt_pe*                                                                                             ///
>                         stroke* dementia* tia*                                                                          ///
>                         cancerExhaem* cancerHaem*                                                                       ///
>                         kidneyfn* liver* transplant*                                                            ///
>                         spleen* autoimmune* immunosuppression*  ibd*                            ///
>                         smi* dialysis neuro                                                                                     ///
>                         coviddeath* otherdeath* covidadmission* composite*
216. 
.         keep    patient_id stp* region_7 imd                                                            ///
>                         household* resid_care_old resid_care_ldr                                        ///
>                         ldr ldr_cat ld_profound ldr_carecat ds cp ldr_group                     ///
>                         age age age1 age2 age3 agegroup agebroad child male                     ///
>                         bmi* obese* ethnicity*                                                                          /// 
>                         respiratory* asthma_severe cf cardiac diabcat                           ///
>                         af dvt_pe stroke dementia tia                                                           ///
>                         cancerExhaem* cancerHaem                                                                        ///
>                         kidneyfn liver transplant                                                                       ///
>                         spleen autoimmune immunosuppression ibd                                         ///
>                         smi dialysis neuro                                                                                      ///
>                         coviddeath* otherdeath* covidadmission* composite*                      ///
>                         stime*
217. 
. 
.                         
. 
.         ***************
.         *  Save data  *
.         ***************
. 
.     sort patient_id
218.         if `i'==1 {
219.             label data "Analysis dataset, wave 1 (1 Mar - 31 Aug 20), for learning disability work"
220.         }
221.         else if `i'==2 {
222.             label data "Analysis dataset, wave 2 (1 Sept 20 - latest), for learning disability work"
223.         }
224.         * Save overall dataset
.         save "analysis/data_ldanalysis_cohort`i'.dta", replace 
225. }
(Base cohort dataset (wave 1), index date 1st March 2020)
2020-03-01
21975
(985 differences between age and agegroup)
(1000 differences between agegroup and agebroad)
(985 differences between age and child)
(167 real changes made, 167 to missing)
(702 differences between bmi and obese40)
(298 real changes made)
(1,000 real changes made)
(0 real changes made)
(imd: 1000 changes made)
(200 differences between asthmacat and asthma_severe)
(649 missing values generated)
(645 missing values generated)
(819 missing values generated)
(15 real changes made)
(1 real change made)
(cancerHaem: 803 changes made)
(20 real changes made)
(658 missing values generated)
(54 missing values generated)
(egfr_cat: 946 changes made)
(935 differences between egfr_cat and kidneyfn)
(54 real changes made)
(172 real changes made)
(177 real changes made)
(386 missing values generated)
(183 real changes made)
(83 real changes made)
(78 real changes made)
(38 real changes made)
(198 missing values generated)
(159 real changes made)
(38 real changes made)
(1 real change made)

           |      ld_profound
       ldr |         0          1 |     Total
-----------+----------------------+----------
         0 |       492        116 |       608 
         1 |       309         83 |       392 
-----------+----------------------+----------
     Total |       801        199 |     1,000 
(ldr_cat: 83 changes made)

           |   Residential care,
           |  learning disability
       ldr |         0          1 |     Total
-----------+----------------------+----------
         0 |       606          2 |       608 
         1 |       386          6 |       392 
-----------+----------------------+----------
     Total |       992          8 |     1,000 
(ldr: 6 changes made)
(116 real changes made)
(79 real changes made)
(124 real changes made)
(68 real changes made)
(249 real changes made)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
coviddeath~e |         41   03aug2020    104.7247  03mar2020  07feb2021

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
covidadmis~e |        200   24aug2020    96.82367  03mar2020  10feb2021
(769 missing values generated)
  0
  0
(17 real changes made)
(0 real changes made)
(96 real changes made)
(0 real changes made)
(2 real changes made)
(7 real changes made)
(106 real changes made)
(0 real changes made)
(2 real changes made)
(0 real changes made)
(6 real changes made)
(0 real changes made)
(5 real changes made)
(24 real changes made)
(8 real changes made)
(0 real changes made)
(1,000 real changes made)
(1,000 real changes made)
(1,000 real changes made)
(1,000 real changes made)
(1,000 real changes made)
(1,000 real changes made)
(note: file analysis/data_ldanalysis_cohort1.dta not found)
file analysis/data_ldanalysis_cohort1.dta saved
(Base cohort dataset (wave 2), index date 1st September 2020)
2020-09-01
22159
(884 differences between age and agegroup)
(893 differences between agegroup and agebroad)
(884 differences between age and child)
(114 real changes made, 114 to missing)
(659 differences between bmi and obese40)
(234 real changes made)
(893 real changes made)
(0 real changes made)
(imd: 893 changes made)
(173 differences between asthmacat and asthma_severe)
(580 missing values generated)
(573 missing values generated)
(729 missing values generated)
(13 real changes made)
(2 real changes made)
(cancerHaem: 714 changes made)
(18 real changes made)
(576 missing values generated)
(48 missing values generated)
(egfr_cat: 845 changes made)
(837 differences between egfr_cat and kidneyfn)
(48 real changes made)
(158 real changes made)
(168 real changes made)
(317 missing values generated)
(144 real changes made)
(69 real changes made)
(67 real changes made)
(34 real changes made)
(171 missing values generated)
(133 real changes made)
(38 real changes made)
(0 real changes made)

           |      ld_profound
       ldr |         0          1 |     Total
-----------+----------------------+----------
         0 |       438        105 |       543 
         1 |       282         68 |       350 
-----------+----------------------+----------
     Total |       720        173 |       893 
(ldr_cat: 68 changes made)

           | Residentia
           |  l care,
           |  learning
           | disability
       ldr |         0 |     Total
-----------+-----------+----------
         0 |       543 |       543 
         1 |       350 |       350 
-----------+-----------+----------
     Total |       893 |       893 
(ldr: 0 changes made)
(100 real changes made)
(77 real changes made)
(109 real changes made)
(70 real changes made)
(218 real changes made)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
coviddeath~e |         17   18nov2020    52.36235  01sep2020  07feb2021

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
covidadmis~e |        180   22aug2020     100.964  02mar2020  11feb2021
(697 missing values generated)
  0
  99
(17 real changes made)
(0 real changes made)
(81 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(97 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(4 real changes made)
(1 real change made)
(0 real changes made)
(3 real changes made)
(5 real changes made)
(1 real change made)
(893 real changes made)
(893 real changes made)
(893 real changes made)
(893 real changes made)
(893 real changes made)
(893 real changes made)
(note: file analysis/data_ldanalysis_cohort2.dta not found)
file analysis/data_ldanalysis_cohort2.dta saved

. 
. log close
      name:  <unnamed>
       log:  C:\Users\emsuewil\Documents\Work\Covid\OpenSAFELY\Absolute_risks\absolute-risks-covid-research\logs/002_create_ld_analysis
> _dataset.log
  log type:  text
 closed on:  11 Feb 2021, 11:50:43
---------------------------------------------------------------------------------------------------------------------------------------
