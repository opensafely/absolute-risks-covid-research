-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /workspace/logs/AL006_cox_regression_inter_wave1_covidadmission_ld
> r_group.log
  log type:  text
 opened on:  25 Feb 2021, 20:14:37

. 
. 
. * Categories of various exposures
. local lo_ldr            = 0

. local hi_ldr            = 1

. local lo_ldr_cat        = 0

. local hi_ldr_cat        = 2

. local hi_ldr            = 1

. local lo_ldr_carecat= 0

. local hi_ldr_carecat= 2

. local lo_ds             = 0

. local hi_ds             = 1

. local lo_cp             = 0

. local hi_cp             = 1

. local lo_ldr_group      = 0

. local hi_ldr_group      = 5

. 
. * Open temporary file to post results
. tempfile ldrfile

. tempname ldrresults

. 
. postfile `ldrresults'   wave str15(outcome) str15(exposure) str20(model)     
>    ///
>                                                 expcat agebroad lnhr sehr usi
> ng `ldrfile'

. 
. 
.         * Open dataset (complete case ethnicity)
.         use "analysis/data_ldanalysis_cohort`i'.dta", clear 
(Analysis dataset, wave 1 (1 Mar - 31 Aug 20), for learning disability work)

.         drop if ethnicity_5>=.
(12,499 observations deleted)

. 
.         * Only keep data for adults
.         keep if child==0
(7,126 observations deleted)

. 
.         
.         /*  Declare data to be survival  */
. 
.         stset stime_`out'`i', fail(`out'`i') scale(365.25)

     failure event:  covidadmission1 != 0 & covidadmission1 < .
obs. time interval:  (0, stime_covidadmission1]
 exit on or before:  failure
    t for analysis:  time/365.25

------------------------------------------------------------------------------
     30,365  total observations
          0  exclusions
------------------------------------------------------------------------------
     30,365  observations remaining, representing
      2,991  failures in single-record/single-failure data
 13,799.439  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  .5037645

. 
.         
.                 
.         /*  Fit Cox models  */
.         
.         * Confounder only model
.         stcox i.`exp'##i.agebroad age1 age2 age3 male i.ethnicity_5,    ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  covidadmission1
   analysis time _t:  stime_covidadmission1/365.25

Iteration 0:   log pseudolikelihood = -20307.744
Iteration 1:   log pseudolikelihood = -20298.454
Iteration 2:   log pseudolikelihood =   -20298.4
Iteration 3:   log pseudolikelihood =   -20298.4
Refining estimates:
Iteration 0:   log pseudolikelihood =   -20298.4

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       30,365             Number of obs    =      30,365
No. of failures      =        2,991
Time at risk         =  13799.43874
                                                Wald chi2(25)    =       18.12
Log pseudolikelihood =     -20298.4             Prob > chi2      =      0.8372

                       (Std. Err. adjusted for 1,207 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.036865   .0776216     0.48   0.629     .8953643    1.200728
 DS and LDR  |   .9729512   .0863687    -0.31   0.757     .8175795    1.157849
CP but no..  |   .9313409   .0631321    -1.05   0.294     .8154717    1.063674
 CP and LDR  |    .947736   .0782535    -0.65   0.516     .8061291    1.114218
LD with n..  |    .948246   .0484881    -1.04   0.299     .8578181    1.048206
             |
    agebroad |
     65-<75  |   1.112032   .1286741     0.92   0.359     .8863883    1.395116
        75+  |   1.101998   .2164155     0.49   0.621     .7499254    1.619362
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9008359    .186926    -0.50   0.615     .5998173    1.352921
DS but no.. #|
        75+  |   .8104325   .1852708    -0.92   0.358      .517757     1.26855
 DS and LDR #|
     65-<75  |   .6743431   .1934788    -1.37   0.170     .3842898    1.183322
 DS and LDR #|
        75+  |   1.057147   .2731195     0.22   0.830     .6371226    1.754074
CP but no.. #|
     65-<75  |   1.166697   .2080962     0.86   0.387     .8224982    1.654937
CP but no.. #|
        75+  |   1.163647   .2382399     0.74   0.459      .779023    1.738171
 CP and LDR #|
     65-<75  |   .8441845   .1959178    -0.73   0.465     .5356622    1.330405
 CP and LDR #|
        75+  |   .7678042   .2188052    -0.93   0.354      .439217    1.342214
LD with n.. #|
     65-<75  |      1.044   .1438762     0.31   0.755     .7968828     1.36775
LD with n.. #|
        75+  |   1.025258   .1650723     0.15   0.877     .7477991    1.405664
             |
        age1 |   .9975632   .0114545    -0.21   0.832     .9753634    1.020268
        age2 |    1.00557   .0291493     0.19   0.848     .9500314    1.064356
        age3 |   .9789364   .0749306    -0.28   0.781     .8425604    1.137386
        male |   .9849918   .0356236    -0.42   0.676      .917588    1.057347
             |
 ethnicity_5 |
      Mixed  |   1.065726   .0590946     1.15   0.251     .9559749    1.188078
Asian or ..  |   .9735972   .0548451    -0.47   0.635     .8718244     1.08725
      Black  |   .9447877   .0530268    -1.01   0.312     .8463696     1.05465
      Other  |   .9298538   .0558503    -1.21   0.226     .8265869    1.046022
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")       
>       ///
>                                 ("Confounders")                              
>                            ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders")                      
>                                    ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0682303   .1894014    -0.36   0.719    -.4394503    .3029897
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1739853   .2162553    -0.80   0.421    -.5978379    .2498673
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.4214376    .281206    -1.50   0.134    -.9725913    .1297161
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0281525   .2450042     0.11   0.909    -.4520469    .5083519
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0830471   .1697436     0.49   0.625    -.2496444    .4157385
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0804295    .188533     0.43   0.670    -.2890884    .4499473
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.2230635   .2135334    -1.04   0.296    -.6415813    .1954543
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.3178998   .2719199    -1.17   0.242     -.850853    .2150535
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0100816   .1300977    -0.08   0.938    -.2650685    .2449052
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0281971   .1505573    -0.19   0.851     -.323284    .2668898
------------------------------------------------------------------------------

.         
.         * Confounders with deprivation
.         stcox i.`exp'##i.agebroad age1 age2 age3 male i.ethnicity_5 imd, ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  covidadmission1
   analysis time _t:  stime_covidadmission1/365.25

Iteration 0:   log pseudolikelihood = -20307.744
Iteration 1:   log pseudolikelihood = -20298.446
Iteration 2:   log pseudolikelihood = -20298.393
Iteration 3:   log pseudolikelihood = -20298.393
Refining estimates:
Iteration 0:   log pseudolikelihood = -20298.393

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       30,365             Number of obs    =      30,365
No. of failures      =        2,991
Time at risk         =  13799.43874
                                                Wald chi2(26)    =       18.12
Log pseudolikelihood =   -20298.393             Prob > chi2      =      0.8713

                       (Std. Err. adjusted for 1,207 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.036839   .0776183     0.48   0.629     .8953443    1.200695
 DS and LDR  |   .9729463    .086363    -0.31   0.757     .8175841    1.157831
CP but no..  |   .9313149   .0631208    -1.05   0.294     .8154654    1.063623
 CP and LDR  |   .9477784   .0782508    -0.65   0.516     .8061756    1.114253
LD with n..  |   .9482821    .048475    -1.04   0.299     .8578773    1.048214
             |
    agebroad |
     65-<75  |   1.112132   .1287018     0.92   0.358     .8864432    1.395282
        75+  |   1.102242   .2164822     0.50   0.620     .7500659    1.619774
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9008815   .1869225    -0.50   0.615     .5998645    1.352951
DS but no.. #|
        75+  |   .8103268   .1852339    -0.92   0.358     .5177054    1.268346
 DS and LDR #|
     65-<75  |   .6741875   .1934303    -1.37   0.169     .3842054    1.183036
 DS and LDR #|
        75+  |   1.056664   .2730434     0.21   0.831     .6367742    1.753431
CP but no.. #|
     65-<75  |   1.166819   .2081259     0.86   0.387     .8225725    1.655132
CP but no.. #|
        75+  |   1.163553   .2381789     0.74   0.459     .7790141    1.737908
 CP and LDR #|
     65-<75  |    .844161   .1959146    -0.73   0.465     .5356446    1.330374
 CP and LDR #|
        75+  |   .7677162   .2188073    -0.93   0.354     .4391361    1.342154
LD with n.. #|
     65-<75  |   1.043873   .1438325     0.31   0.755     .7968243    1.367516
LD with n.. #|
        75+  |   1.025152   .1650367     0.15   0.877     .7477482    1.405468
             |
        age1 |    .997563   .0114543    -0.21   0.832     .9753638    1.020267
        age2 |   1.005575   .0291476     0.19   0.848      .950039    1.064357
        age3 |   .9789115   .0749205    -0.28   0.781     .8425529    1.137338
        male |   .9849745   .0356263    -0.42   0.676     .9175659    1.057335
             |
 ethnicity_5 |
      Mixed  |   1.065753   .0591037     1.15   0.251      .955985    1.188124
Asian or ..  |   .9736545   .0548618    -0.47   0.636     .8718523    1.087344
      Black  |   .9448198   .0530351    -1.01   0.312      .846387      1.0547
      Other  |   .9298615   .0558525    -1.21   0.226     .8265906    1.046035
             |
         imd |   1.001609   .0129174     0.12   0.901     .9766087    1.027249
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                                 ("Confounders+IMD")                          
>                    ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }       
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+IMD")                  
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0682046   .1893892    -0.36   0.719    -.4394005    .3029914
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1741407   .2162309    -0.81   0.421    -.5979456    .2496641
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.4216734    .281151    -1.50   0.134    -.9727193    .1293724
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0276906   .2449501     0.11   0.910    -.4524028    .5077841
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0831231   .1697564     0.49   0.624    -.2495934    .4158396
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0803202   .1884694     0.43   0.670    -.2890729    .4497134
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.2230466   .2135496    -1.04   0.296    -.6415961    .1955029
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.3179697   .2719594    -1.17   0.242    -.8510004     .215061
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0101659   .1300912    -0.08   0.938      -.26514    .2448082
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0282625   .1505538    -0.19   0.851    -.3233425    .2668176
------------------------------------------------------------------------------

.         
.         * Confounders with residential care
.         stcox i.`exp'##i.agebroad age1 age2 age3 male   ///
>                                 i.ethnicity_5 resid_care_ldr,           ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  covidadmission1
   analysis time _t:  stime_covidadmission1/365.25

Iteration 0:   log pseudolikelihood = -20307.744
Iteration 1:   log pseudolikelihood = -20298.016
Iteration 2:   log pseudolikelihood = -20297.962
Iteration 3:   log pseudolikelihood = -20297.962
Refining estimates:
Iteration 0:   log pseudolikelihood = -20297.962

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       30,365             Number of obs    =      30,365
No. of failures      =        2,991
Time at risk         =  13799.43874
                                                Wald chi2(26)    =       18.98
Log pseudolikelihood =   -20297.962             Prob > chi2      =      0.8373

                       (Std. Err. adjusted for 1,207 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.036983   .0776299     0.49   0.628     .8954669    1.200863
 DS and LDR  |   .9733635   .0863852    -0.30   0.761     .8179592    1.158293
CP but no..  |   .9316558   .0631501    -1.04   0.296     .8157531    1.064026
 CP and LDR  |    .948681   .0783081    -0.64   0.523      .806972    1.115275
LD with n..  |   .9491271   .0485039    -1.02   0.307     .8586671    1.049117
             |
    agebroad |
     65-<75  |   1.111021    .128556     0.91   0.363     .8855846    1.393846
        75+  |   1.101243   .2163148     0.49   0.623     .7493481    1.618389
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9013769   .1870234    -0.50   0.617     .6001969     1.35369
DS but no.. #|
        75+  |   .8095767   .1850908    -0.92   0.356     .5171906    1.267259
 DS and LDR #|
     65-<75  |   .6753421   .1937565    -1.37   0.171     .3848691    1.185044
 DS and LDR #|
        75+  |   1.058496     .27347     0.22   0.826     .6379329    1.756318
CP but no.. #|
     65-<75  |   1.165855   .2079378     0.86   0.390     .8219156     1.65372
CP but no.. #|
        75+  |    1.16424    .238385     0.74   0.458     .7793888    1.739126
 CP and LDR #|
     65-<75  |   .8446175   .1960393    -0.73   0.467     .5359109    1.331152
 CP and LDR #|
        75+  |   .7670922    .218648    -0.93   0.352     .4387584    1.341126
LD with n.. #|
     65-<75  |   1.043164   .1437397     0.31   0.759     .7962758      1.3666
LD with n.. #|
        75+  |   1.024576   .1649514     0.15   0.880     .7473172    1.404698
             |
        age1 |   .9975973   .0114539    -0.21   0.834     .9753988    1.020301
        age2 |   1.005468   .0291429     0.19   0.851     .9499415    1.064241
        age3 |   .9792548   .0749412    -0.27   0.784     .8428577    1.137725
        male |   .9848976   .0356229    -0.42   0.674     .9174953    1.057252
             |
 ethnicity_5 |
      Mixed  |   1.065666   .0591001     1.15   0.251     .9559058     1.18803
Asian or ..  |   .9729924   .0548139    -0.49   0.627     .8712779    1.086581
      Black  |   .9445665   .0530165    -1.02   0.310     .8461676    1.054408
      Other  |   .9295034   .0558415    -1.22   0.224     .8262541    1.045655
             |
resid_care~r |   .9186994   .0798289    -0.98   0.329     .7748358    1.089274
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                                 ("Confounders+Resid")                        
>                    ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }               
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+Resid")                
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0675163   .1893877    -0.36   0.721    -.4387095    .3036768
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1749283    .216297    -0.81   0.419    -.5988626     .249006
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.4195337   .2811928    -1.49   0.136    -.9706615    .1315942
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .029851   .2450162     0.12   0.903     -.450372     .510074
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0826629   .1697525     0.49   0.626    -.2500459    .4153718
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .081277   .1885544     0.43   0.666    -.2882829    .4508369
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.2215541   .2135699    -1.04   0.300    -.6401434    .1970352
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.3178309   .2719673    -1.17   0.243     -.850877    .2152151
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0099546   .1300873    -0.08   0.939     -.264921    .2450119
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   -.027934   .1505352    -0.19   0.853    -.3229775    .2671096
------------------------------------------------------------------------------

.         
.         * Confounders with physical comorbidities that are indicators for vac
> cination 
.         stcox i.`exp'##i.agebroad age1 age2 age3 male           ///
>                                 i.ethnicity_5                                
>                    ///
>                                 obese40                                      
>                            ///
>                                 respiratory asthma_severe                    
>            ///
>                                 cardiac af dvt_pe i.diabcat                  
>            ///
>                                 liver stroke tia dementia                    
>            ///
>                                 i.kidneyfn                                   
>                            ///
>                                 spleen transplant dialysis                   
>            ///
>                                 immunosuppression cancerHaem                 
>    ///
>                                 autoimmune ibd cancerExhaem1yr,              
>    ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  covidadmission1
   analysis time _t:  stime_covidadmission1/365.25

Iteration 0:   log pseudolikelihood = -2953.2419
Iteration 1:   log pseudolikelihood = -2931.6012
Iteration 2:   log pseudolikelihood = -2931.2043
Iteration 3:   log pseudolikelihood = -2931.1421
Iteration 4:   log pseudolikelihood = -2931.1199
Iteration 5:   log pseudolikelihood = -2931.1117
Iteration 6:   log pseudolikelihood = -2931.1087
Iteration 7:   log pseudolikelihood = -2931.1076
Iteration 8:   log pseudolikelihood = -2931.1072
Iteration 9:   log pseudolikelihood = -2931.1071
Iteration 10:  log pseudolikelihood =  -2931.107
Iteration 11:  log pseudolikelihood =  -2931.107
Iteration 12:  log pseudolikelihood =  -2931.107
Iteration 13:  log pseudolikelihood =  -2931.107
Iteration 14:  log pseudolikelihood =  -2931.107
Iteration 15:  log pseudolikelihood =  -2931.107
Iteration 16:  log pseudolikelihood =  -2931.107
Iteration 17:  log pseudolikelihood =  -2931.107
Iteration 18:  log pseudolikelihood =  -2931.107
Iteration 19:  log pseudolikelihood =  -2931.107
Iteration 20:  log pseudolikelihood =  -2931.107
Iteration 21:  log pseudolikelihood =  -2931.107
Iteration 22:  log pseudolikelihood =  -2931.107
Iteration 23:  log pseudolikelihood =  -2931.107
Iteration 24:  log pseudolikelihood =  -2931.107
Iteration 25:  log pseudolikelihood =  -2931.107
Iteration 26:  log pseudolikelihood =  -2931.107
Iteration 27:  log pseudolikelihood =  -2931.107
Iteration 28:  log pseudolikelihood =  -2931.107
Iteration 29:  log pseudolikelihood =  -2931.107
Iteration 30:  log pseudolikelihood =  -2931.107
Iteration 31:  log pseudolikelihood =  -2931.107
Iteration 32:  log pseudolikelihood =  -2931.107
Refining estimates:
Iteration 0:   log pseudolikelihood =  -2931.107
Iteration 1:   log pseudolikelihood =  -2931.107

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        6,087             Number of obs    =       6,087
No. of failures      =          570
Time at risk         =  2776.616016
                                                Wald chi2(48)    =     7774.60
Log pseudolikelihood =    -2931.107             Prob > chi2      =      0.0000

                         (Std. Err. adjusted for 986 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   .9432703   .1816658    -0.30   0.762     .6466988    1.375848
 DS and LDR  |   1.003889   .1963411     0.02   0.984     .6842385    1.472869
CP but no..  |    1.17195     .17853     1.04   0.298      .869442    1.579711
 CP and LDR  |   1.023122   .1878094     0.12   0.901     .7139646    1.466149
LD with n..  |   .9045969   .1075635    -0.84   0.399     .7165404    1.142009
             |
    agebroad |
     65-<75  |   1.232679    .309412     0.83   0.405     .7536882    2.016082
        75+  |   .9187343   .3898184    -0.20   0.842     .3999684    2.110349
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   1.073881   .4692761     0.16   0.870     .4560251    2.528852
DS but no.. #|
        75+  |   1.212093   .6073595     0.38   0.701     .4539552    3.236375
 DS and LDR #|
     65-<75  |    .312365   .2280632    -1.59   0.111     .0746767    1.306591
 DS and LDR #|
        75+  |   1.104482   .6853105     0.16   0.873     .3273434    3.726605
CP but no.. #|
     65-<75  |   .7178357   .2968434    -0.80   0.423      .319177    1.614428
CP but no.. #|
        75+  |   .6722301   .3415006    -0.78   0.434     .2483692    1.819442
 CP and LDR #|
     65-<75  |   .4973981   .3008352    -1.15   0.248     .1520136    1.627519
 CP and LDR #|
        75+  |   .9067873   .5909034    -0.15   0.881     .2528275     3.25227
LD with n.. #|
     65-<75  |    1.32182   .3645501     1.01   0.312     .7698675    2.269492
LD with n.. #|
        75+  |   .8908744   .3062674    -0.34   0.737     .4541381    1.747612
             |
        age1 |   1.009262   .0267682     0.35   0.728     .9581377    1.063115
        age2 |   .9657231   .0634546    -0.53   0.596     .8490297    1.098455
        age3 |   1.113666   .1873647     0.64   0.522     .8008431    1.548682
        male |   .9841885   .0853515    -0.18   0.854     .8303473    1.166532
             |
 ethnicity_5 |
      Mixed  |   1.037117    .132086     0.29   0.775     .8080156    1.331177
Asian or ..  |   1.020034   .1254465     0.16   0.872     .8015521    1.298069
      Black  |   .8284766   .1087859    -1.43   0.152      .640487    1.071643
      Other  |   .8146104   .1096813    -1.52   0.128     .6256651    1.060616
             |
     obese40 |   .9594452    .095728    -0.41   0.678     .7890275    1.166671
 respiratory |   1.084276    .107814     0.81   0.416     .8922802    1.317584
asthma_sev~e |   .8266631   .1159302    -1.36   0.175     .6279964    1.088178
     cardiac |   1.234526   .1193103     2.18   0.029     1.021495    1.491984
          af |    .995869   .1053694    -0.04   0.969     .8093559    1.225363
      dvt_pe |   1.147557   .1144879     1.38   0.168     .9437404     1.39539
             |
     diabcat |
Controlle..  |   1.107101   .1256318     0.90   0.370     .8863279    1.382866
Uncontrol..  |   .8137546   .1956473    -0.86   0.391     .5079757    1.303599
Diabetes,..  |   3.99e-15   1.60e-15   -82.43   0.000     1.81e-15    8.77e-15
             |
       liver |   1.201517   .1194103     1.85   0.065     .9888606    1.459906
      stroke |    .981082    .102328    -0.18   0.855     .7996943    1.203612
         tia |   1.140147   .1198768     1.25   0.212     .9278215    1.401063
    dementia |   .9668364   .1041506    -0.31   0.754     .7828146    1.194118
             |
    kidneyfn |
Stage 3a/..  |   1.317894   .6142364     0.59   0.554     .5286368    3.285516
Stage 4/5..  |   1.015166   .1400578     0.11   0.913     .7746414    1.330373
             |
      spleen |   1.040811   .0902358     0.46   0.645     .8781621    1.233585
  transplant |   1.205362   .1305748     1.72   0.085     .9747842    1.490482
    dialysis |   .9196041   .1446747    -0.53   0.594     .6755966     1.25174
immunosupp~n |   1.070868    .096031     0.76   0.445     .8982638     1.27664
  cancerHaem |   .9991565   .0349082    -0.02   0.981     .9330277    1.069972
  autoimmune |   .8934757    .100727    -1.00   0.318     .7163439    1.114407
         ibd |   .9523625   .1030548    -0.45   0.652     .7703606    1.177363
cancerExha~r |    1.07997   .6094874     0.14   0.892     .3572983    3.264317
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'") ///
>                         ("Confounders+Comorb")                               
>            ///
>                         (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+Comorb")               
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0128766   .3997628     0.03   0.974    -.7706441    .7963973
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1339462   .4678048     0.29   0.775    -.7829343    1.050827
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -1.159701   .7289534    -1.59   0.112    -2.588423    .2690213
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1032579   .5852351     0.18   0.860    -1.043782    1.250298
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1728454   .3797875    -0.46   0.649    -.9172152    .5715243
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.2384856   .4812923    -0.50   0.620    -1.181801    .7048301
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.6755057    .577453    -1.17   0.242    -1.807293    .4562814
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0749885   .6080316    -0.12   0.902    -1.266709    1.116731
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1787437   .2493075     0.72   0.473      -.30989    .6673774
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.2158177   .3189594    -0.68   0.499    -.8409666    .4093312
------------------------------------------------------------------------------

.         
.         * All variables
.         stcox i.`exp'##i.agebroad age1 age2 age3 male           ///
>                                 i.ethnicity_5 imd resid_care_ldr             
>    ///
>                                 obese40                                      
>                            ///
>                                 respiratory asthma_severe                    
>            ///
>                                 cardiac af dvt_pe i.diabcat                  
>            ///
>                                 liver stroke tia dementia                    
>            ///
>                                 i.kidneyfn                                   
>                            ///
>                                 spleen transplant dialysis                   
>            ///
>                                 immunosuppression cancerHaem                 
>    ///
>                                 autoimmune ibd cancerExhaem1yr,              
>    ///
>                                 strata(stpcode) cluster(household_id) 

         failure _d:  covidadmission1
   analysis time _t:  stime_covidadmission1/365.25

Iteration 0:   log pseudolikelihood = -2953.2419
Iteration 1:   log pseudolikelihood = -2931.0907
Iteration 2:   log pseudolikelihood = -2930.6838
Iteration 3:   log pseudolikelihood = -2930.6217
Iteration 4:   log pseudolikelihood = -2930.5995
Iteration 5:   log pseudolikelihood = -2930.5914
Iteration 6:   log pseudolikelihood = -2930.5884
Iteration 7:   log pseudolikelihood = -2930.5872
Iteration 8:   log pseudolikelihood = -2930.5868
Iteration 9:   log pseudolikelihood = -2930.5867
Iteration 10:  log pseudolikelihood = -2930.5866
Iteration 11:  log pseudolikelihood = -2930.5866
Iteration 12:  log pseudolikelihood = -2930.5866
Iteration 13:  log pseudolikelihood = -2930.5866
Iteration 14:  log pseudolikelihood = -2930.5866
Iteration 15:  log pseudolikelihood = -2930.5866
Iteration 16:  log pseudolikelihood = -2930.5866
Iteration 17:  log pseudolikelihood = -2930.5866
Iteration 18:  log pseudolikelihood = -2930.5866
Iteration 19:  log pseudolikelihood = -2930.5866
Iteration 20:  log pseudolikelihood = -2930.5866
Iteration 21:  log pseudolikelihood = -2930.5866
Iteration 22:  log pseudolikelihood = -2930.5866
Iteration 23:  log pseudolikelihood = -2930.5866
Iteration 24:  log pseudolikelihood = -2930.5866
Iteration 25:  log pseudolikelihood = -2930.5866
Iteration 26:  log pseudolikelihood = -2930.5866
Iteration 27:  log pseudolikelihood = -2930.5866
Iteration 28:  log pseudolikelihood = -2930.5866
Iteration 29:  log pseudolikelihood = -2930.5866
Refining estimates:
Iteration 0:   log pseudolikelihood = -2930.5866
Iteration 1:   log pseudolikelihood = -2930.5866

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        6,087             Number of obs    =       6,087
No. of failures      =          570
Time at risk         =  2776.616016
                                                Wald chi2(50)    =     6422.22
Log pseudolikelihood =   -2930.5866             Prob > chi2      =      0.0000

                         (Std. Err. adjusted for 986 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   .9477458   .1825237    -0.28   0.780     .6497726    1.382364
 DS and LDR  |   1.005567   .1965822     0.03   0.977     .6854985    1.475081
CP but no..  |   1.175351   .1791018     1.06   0.289     .8718868    1.584437
 CP and LDR  |   1.027411   .1886809     0.15   0.883     .7168423    1.472532
LD with n..  |   .9057382   .1077408    -0.83   0.405     .7173799    1.143553
             |
    agebroad |
     65-<75  |   1.239053   .3100047     0.86   0.392     .7587934     2.02328
        75+  |   .9231585   .3917896    -0.19   0.851     .4018143    2.120934
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   1.077253   .4710943     0.17   0.865     .4571703    2.538384
DS but no.. #|
        75+  |   1.220703   .6106989     0.40   0.690     .4578963    3.254266
 DS and LDR #|
     65-<75  |   .3117025   .2277312    -1.60   0.111     .0744472    1.305064
 DS and LDR #|
        75+  |   1.118612    .694125     0.18   0.857     .3315041    3.774592
CP but no.. #|
     65-<75  |    .716057   .2962987    -0.81   0.420     .3182198    1.611269
CP but no.. #|
        75+  |   .6774353   .3444468    -0.77   0.444     .2500739    1.835132
 CP and LDR #|
     65-<75  |    .495922   .3001075    -1.16   0.246     .1514636    1.623748
 CP and LDR #|
        75+  |   .9043818   .5902025    -0.15   0.878     .2516836     3.24974
LD with n.. #|
     65-<75  |   1.320055   .3634311     1.01   0.313     .7695612    2.264335
LD with n.. #|
        75+  |   .8918458   .3064455    -0.33   0.739      .454789    1.748919
             |
        age1 |   1.009338   .0267025     0.35   0.725     .9583363    1.063055
        age2 |   .9655277   .0633256    -0.53   0.593     .8490581    1.097974
        age3 |   1.113716   .1870862     0.64   0.521      .801284     1.54797
        male |   .9858103   .0856561    -0.16   0.869     .8314446    1.168835
             |
 ethnicity_5 |
      Mixed  |   1.038885   .1323469     0.30   0.765     .8093386    1.333536
Asian or ..  |   1.019613   .1253094     0.16   0.874      .801352     1.29732
      Black  |   .8293491   .1089535    -1.42   0.154     .6410811    1.072906
      Other  |   .8172125   .1101568    -1.50   0.134     .6274753    1.064323
             |
         imd |   .9958944   .0281921    -0.15   0.884     .9421439    1.052712
resid_care~r |   .8163274   .1523613    -1.09   0.277     .5662316    1.176887
     obese40 |   .9604232   .0958081    -0.40   0.686       .78986    1.167818
 respiratory |   1.084081   .1078819     0.81   0.417     .8919794    1.317555
asthma_sev~e |   .8279471   .1161421    -1.35   0.178     .6289244     1.08995
     cardiac |   1.235194   .1195162     2.18   0.029     1.021819    1.493127
          af |   .9964795   .1054172    -0.03   0.973     .8098788    1.226074
      dvt_pe |    1.14706   .1144858     1.37   0.169      .943256      1.3949
             |
     diabcat |
Controlle..  |   1.106334   .1255322     0.89   0.373      .885734    1.381877
Uncontrol..  |    .813519    .195621    -0.86   0.391     .5077914    1.303317
Diabetes,..  |   8.05e-14   3.24e-14   -74.79   0.000     3.65e-14    1.77e-13
             |
       liver |    1.20265    .119536     1.86   0.063     .9897713    1.461313
      stroke |    .982208    .102416    -0.17   0.863     .8006591    1.204923
         tia |   1.139325   .1196413     1.24   0.214     .9273902    1.399694
    dementia |   .9649931   .1035783    -0.33   0.740     .7819156    1.190936
             |
    kidneyfn |
Stage 3a/..  |   1.306956   .6119764     0.57   0.568     .5220226    3.272143
Stage 4/5..  |   1.014927   .1399557     0.11   0.914     .7745619    1.329882
             |
      spleen |   1.041127   .0902486     0.46   0.642     .8784528    1.233925
  transplant |    1.20254   .1299883     1.71   0.088     .9729467    1.486312
    dialysis |   .9217464   .1450305    -0.52   0.605     .6771435    1.254707
immunosupp~n |   1.069823   .0961091     0.75   0.452     .8971049    1.275795
  cancerHaem |   .9997414    .034914    -0.01   0.994     .9336005    1.070568
  autoimmune |   .8923856    .100767    -1.01   0.313      .715214    1.113446
         ibd |    .954473   .1032712    -0.43   0.667     .7720868    1.179943
cancerExha~r |   1.082834   .6116737     0.14   0.888     .3578764    3.276352
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                         ("All")                                              
>                                    ///
>                         (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )     ///
>                                         ("All")                              
>                                    ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0207452   .4001993     0.05   0.959    -.7636309    .8051213
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1457582   .4666137     0.31   0.755    -.7687878    1.060304
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -1.160154   .7291788    -1.59   0.112    -2.589318    .2690099
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1176405   .5852883     0.20   0.841    -1.029503    1.264784
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1724288   .3800877    -0.45   0.650    -.9173869    .5725294
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.2278745   .4819697    -0.47   0.636    -1.172518    .7167688
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.6742945   .5778103    -1.17   0.243    -1.806782    .4581929
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.0734616   .6086817    -0.12   0.904    -1.266456    1.119532
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .178668   .2490407     0.72   0.473    -.3094427    .6667787
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   -.213467   .3190229    -0.67   0.503    -.8387403    .4118063
------------------------------------------------------------------------------

. 
. postclose `ldrresults'

. 
. use `ldrfile', clear

. 
. 
. *************************
. *  Tidy output for HRs  *
. *************************
. 
. * Outcome
. rename outcome out

. gen outcome     = 1 if out=="coviddeath"
(90 missing values generated)

. replace outcome = 2 if out=="covidadmission"
(90 real changes made)

. replace outcome = 3 if out=="composite"
(0 real changes made)

. 
. label define outcome    1 "COVID-19 death"              ///
>                                                 2 "COVID-19 admission"  ///
>                                                 3 "Composite"

. label values outcome outcome

. drop out

. 
. * Exposure
. rename exposure exp

. gen     exposure = 1 if exp=="ldr"
(90 missing values generated)

. replace exposure = 2 if exp=="ldr_cat"
(0 real changes made)

. replace exposure = 3 if exp=="ldr_carecat"
(0 real changes made)

. replace exposure = 4 if exp=="ds"
(0 real changes made)

. replace exposure = 5 if exp=="cp"
(0 real changes made)

. replace exposure = 6 if exp=="ldr_group"
(90 real changes made)

. 
. label define exposure   1 "Learning disability register"        ///
>                                                 2 "LDR Severe vs mild"       
>                    ///
>                                                 3 "LDR by residential care"  
>                    ///
>                                                 4 "Down's syndrome"          
>                            ///
>                                                 5 "Cerebral Palsy"           
>                            ///
>                                                 6 "Combined grouping"        
>                    

. label values exposure exposure                                          

. drop exp

. 
. * Age categories
. label define agebroad   1 "16-<65"              ///
>                                                 2 "65-<75"              ///
>                                                 3 "75+"

. label values agebroad agebroad

. 
. 
. * Categories of exposure
. gen category     = "No"                                         if expcat==0
(75 missing values generated)

. replace category = "Yes"                                        if inlist(exp
> osure, 1, 4, 5) & expcat==1
(0 real changes made)

. 
. replace category = "LDR, mild"                          if inlist(exposure, 2
> ) & expcat==1
(0 real changes made)

. replace category = "LDR, profound"                      if inlist(exposure, 2
> ) & expcat==2
(0 real changes made)

. 
. replace category = "LDR, community"             if inlist(exposure, 3) & expc
> at==1
(0 real changes made)

. replace category = "LDR, residential care"      if inlist(exposure, 3) & expc
> at==2
(0 real changes made)

. 
. replace category = "DS but not LDR"             if inlist(exposure, 6) & expc
> at==1
variable category was str2 now str14
(15 real changes made)

. replace category = "DS and LDR"                         if inlist(exposure, 6
> ) & expcat==2
(15 real changes made)

. replace category = "CP but not LDR"             if inlist(exposure, 6) & expc
> at==3
(15 real changes made)

. replace category = "CP and LDR"                         if inlist(exposure, 6
> ) & expcat==4
(15 real changes made)

. replace category = "LDR with no DS or CP"       if inlist(exposure, 6) & expc
> at==5
variable category was str14 now str20
(15 real changes made)

. 
. * Model adjustment
. gen     adjustment = 1 if model=="Confounders"
(72 missing values generated)

. replace adjustment = 2 if model=="Confounders+IMD"
(18 real changes made)

. replace adjustment = 3 if model=="Confounders+Resid"
(18 real changes made)

. replace adjustment = 4 if model=="Confounders+Comorb"
(18 real changes made)

. replace adjustment = 5 if model=="All"
(18 real changes made)

. label define adj        1 "Confounders"                                      
>    ///     
>                                         2 "Confounders with IMD"             
>            ///
>                                         3 "Confounders with care"            
>            ///
>                                         4 "Confounders with comorbidities"   
>    ///
>                                         5 "All"

. label values adjustment adj

. drop model

. 
. * Hazard ratio with 95% confidence interval
. gen cl = exp(lnhr - invnorm(0.975)*sehr)

. gen cu = exp(lnhr + invnorm(0.975)*sehr)

. gen hr = exp(lnhr)

. 
. gen hr_ci =   string(round(hr, 0.01)) + " (" ///
>                         + string(round(cl, 0.01)) + ", " ///
>                         + string(round(cu, 0.01)) + ")"

. replace hr_ci = "" if expcat==0
(15 real changes made)

. drop cl cu hr lnhr sehr

. 
. * Put in wide format
. reshape wide hr_ci, i(wave outcome exposure expcat agebroad) j(adjust)
(note: j = 1 2 3 4 5)

Data                               long   ->   wide
-----------------------------------------------------------------------------
Number of obs.                       90   ->      18
Number of variables                   8   ->      11
j variable (5 values)        adjustment   ->   (dropped)
xij variables:
                                  hr_ci   ->   hr_ci1 hr_ci2 ... hr_ci5
-----------------------------------------------------------------------------

. rename hr_ci1 hr_conf

. rename hr_ci2 hr_conf_imd

. rename hr_ci3 hr_conf_resid

. rename hr_ci4 hr_conf_comorb

. 
. 
. order wave outcome exposure agebroad category hr*

. sort wave outcome exposure agebroad expcat

. 
. * Save data
. outsheet using "output/ldcox_inter_wave`i'_`out'_`exp'", replace
(note: file output/ldcox_inter_wave1_covidadmission_ldr_group.out not found)

. 
. log close
      name:  <unnamed>
       log:  /workspace/logs/AL006_cox_regression_inter_wave1_covidadmission_ld
> r_group.log
  log type:  text
 closed on:  25 Feb 2021, 20:14:57
-------------------------------------------------------------------------------
