-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /workspace/logs/AL006_cox_regression_inter_wave1_coviddeath_ldr_gr
> oup.log
  log type:  text
 opened on:  25 Feb 2021, 20:23:37

. 
. 
. * Categories of various exposures
. local lo_ldr            = 0

. local hi_ldr            = 1

. local lo_ldr_cat        = 0

. local hi_ldr_cat        = 2

. local hi_ldr            = 1

. local lo_ldr_carecat= 0

. local hi_ldr_carecat= 2

. local lo_ds             = 0

. local hi_ds             = 1

. local lo_cp             = 0

. local hi_cp             = 1

. local lo_ldr_group      = 0

. local hi_ldr_group      = 5

. 
. * Open temporary file to post results
. tempfile ldrfile

. tempname ldrresults

. 
. postfile `ldrresults'   wave str15(outcome) str15(exposure) str20(model)     
>    ///
>                                                 expcat agebroad lnhr sehr usi
> ng `ldrfile'

. 
. 
.         * Open dataset (complete case ethnicity)
.         use "analysis/data_ldanalysis_cohort`i'.dta", clear 
(Analysis dataset, wave 1 (1 Mar - 31 Aug 20), for learning disability work)

.         drop if ethnicity_5>=.
(12,499 observations deleted)

. 
.         * Only keep data for adults
.         keep if child==0
(7,126 observations deleted)

. 
.         
.         /*  Declare data to be survival  */
. 
.         stset stime_`out'`i', fail(`out'`i') scale(365.25)

     failure event:  coviddeath1 != 0 & coviddeath1 < .
obs. time interval:  (0, stime_coviddeath1]
 exit on or before:  failure
    t for analysis:  time/365.25

------------------------------------------------------------------------------
     30,365  total observations
          0  exclusions
------------------------------------------------------------------------------
     30,365  observations remaining, representing
        648  failures in single-record/single-failure data
 14,525.018  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  .5037645

. 
.         
.                 
.         /*  Fit Cox models  */
.         
.         * Confounder only model
.         stcox i.`exp'##i.agebroad age1 age2 age3 male i.ethnicity_5,    ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath1
   analysis time _t:  stime_coviddeath1/365.25

Iteration 0:   log pseudolikelihood = -4435.1167
Iteration 1:   log pseudolikelihood = -4422.4167
Iteration 2:   log pseudolikelihood = -4421.0619
Iteration 3:   log pseudolikelihood = -4421.0439
Iteration 4:   log pseudolikelihood = -4421.0439
Refining estimates:
Iteration 0:   log pseudolikelihood = -4421.0439

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       30,365             Number of obs    =      30,365
No. of failures      =          648
Time at risk         =  14525.01848
                                                Wald chi2(25)    =       31.82
Log pseudolikelihood =   -4421.0439             Prob > chi2      =      0.1634

                       (Std. Err. adjusted for 1,207 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.211915   .1825651     1.28   0.202     .9020811    1.628166
 DS and LDR  |   .7513821   .1591213    -1.35   0.177     .4961359    1.137945
CP but no..  |   .9195669   .1403051    -0.55   0.583      .681882    1.240102
 CP and LDR  |   .9054017   .1624707    -0.55   0.580     .6369372    1.287022
LD with n..  |   .9830838   .1068389    -0.16   0.875     .7944823    1.216457
             |
    agebroad |
     65-<75  |   .9200321    .229346    -0.33   0.738     .5644365    1.499653
        75+  |   .6015242   .2674115    -1.14   0.253     .2516784    1.437674
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9225077   .3807581    -0.20   0.845     .4108119    2.071558
DS but no.. #|
        75+  |   .5645706   .3659723    -0.88   0.378     .1584685    2.011378
 DS and LDR #|
     65-<75  |   1.172724   .6732239     0.28   0.781     .3806694    3.612799
 DS and LDR #|
        75+  |   1.346317    .839794     0.48   0.634     .3964535     4.57196
CP but no.. #|
     65-<75  |   1.570881   .5547677     1.28   0.201     .7862047    3.138709
CP but no.. #|
        75+  |   3.199707   1.182962     3.15   0.002      1.55029    6.604005
 CP and LDR #|
     65-<75  |   .9053972   .4717921    -0.19   0.849     .3260527    2.514146
 CP and LDR #|
        75+  |   3.570575   1.570436     2.89   0.004     1.507844    8.455122
LD with n.. #|
     65-<75  |   .8551205   .2751118    -0.49   0.627     .4551728    1.606491
LD with n.. #|
        75+  |   1.289306    .489396     0.67   0.503     .6127114    2.713038
             |
        age1 |   .9985996   .0241104    -0.06   0.954     .9524447    1.046991
        age2 |    1.00837   .0606518     0.14   0.890     .8962343    1.134536
        age3 |   .9780439   .1547386    -0.14   0.888     .7172784     1.33361
        male |   .9364151   .0713592    -0.86   0.389     .8064973    1.087261
             |
 ethnicity_5 |
      Mixed  |   1.188908   .1500357     1.37   0.170     .9283887    1.522533
Asian or ..  |   1.191164    .148745     1.40   0.161     .9325645    1.521473
      Black  |   1.103562   .1429693     0.76   0.447     .8560935    1.422564
      Other  |   1.123981    .146214     0.90   0.369     .8710237    1.450402
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")       
>       ///
>                                 ("Confounders")                              
>                            ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders")                      
>                                    ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1115421    .384825     0.29   0.772     -.642701    .8657852
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.3794881   .6256872    -0.61   0.544    -1.605813    .8468364
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1265116   .5323095    -0.24   0.812    -1.169819     .916796
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0115318   .5897022     0.02   0.984    -1.144263    1.167327
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3677843   .3180824     1.16   0.248    -.2556458    .9912145
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.079207   .3361337     3.21   0.001     .4203968    1.738017
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1987581   .4829154    -0.41   0.681    -1.145255    .7477386
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    1.17335   .3943827     2.98   0.003     .4003743    1.946326
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1735738   .2965722    -0.59   0.558    -.7548447    .4076971
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .237043   .3609809     0.66   0.511    -.4704666    .9445527
------------------------------------------------------------------------------

.         
.         * Confounders with deprivation
.         stcox i.`exp'##i.agebroad age1 age2 age3 male i.ethnicity_5 imd, ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath1
   analysis time _t:  stime_coviddeath1/365.25

Iteration 0:   log pseudolikelihood = -4435.1167
Iteration 1:   log pseudolikelihood = -4421.7587
Iteration 2:   log pseudolikelihood = -4420.4027
Iteration 3:   log pseudolikelihood = -4420.3846
Iteration 4:   log pseudolikelihood = -4420.3846
Refining estimates:
Iteration 0:   log pseudolikelihood = -4420.3846

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       30,365             Number of obs    =      30,365
No. of failures      =          648
Time at risk         =  14525.01848
                                                Wald chi2(26)    =       32.32
Log pseudolikelihood =   -4420.3846             Prob > chi2      =      0.1828

                       (Std. Err. adjusted for 1,207 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.212242   .1826045     1.28   0.201     .9023393     1.62858
 DS and LDR  |   .7520118   .1592384    -1.35   0.178     .4965726     1.13885
CP but no..  |   .9197668   .1403865    -0.55   0.584     .6819563    1.240506
 CP and LDR  |    .904636   .1622631    -0.56   0.576     .6364953    1.285738
LD with n..  |   .9820601   .1066786    -0.17   0.868     .7937328    1.215071
             |
    agebroad |
     65-<75  |   .9182479   .2290847    -0.34   0.732     .5631213    1.497331
        75+  |   .5995951   .2667397    -1.15   0.250     .2507189    1.433934
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9224878   .3808077    -0.20   0.845     .4107525    2.071767
DS but no.. #|
        75+  |   .5667484    .367347    -0.88   0.381     .1591001    2.018878
 DS and LDR #|
     65-<75  |   1.179362   .6770265     0.29   0.774     .3828288      3.6332
 DS and LDR #|
        75+  |   1.356867   .8472614     0.49   0.625     .3990488    4.613693
CP but no.. #|
     65-<75  |   1.569277   .5543572     1.28   0.202     .7852488    3.136116
CP but no.. #|
        75+  |   3.203836   1.184194     3.15   0.002      1.55257    6.611338
 CP and LDR #|
     65-<75  |   .9066332    .472341    -0.19   0.851      .326565     2.51706
 CP and LDR #|
        75+  |   3.570424   1.570625     2.89   0.004     1.507569    8.455949
LD with n.. #|
     65-<75  |   .8580508   .2759473    -0.48   0.634     .4568445    1.611601
LD with n.. #|
        75+  |   1.291649   .4901613     0.67   0.500     .6139406    2.717457
             |
        age1 |   .9985953   .0241072    -0.06   0.954     .9524464     1.04698
        age2 |   1.008301   .0606457     0.14   0.891     .8961761    1.134454
        age3 |   .9784727   .1548429    -0.14   0.891     .7175405    1.334292
        male |   .9365256   .0713626    -0.86   0.389     .8066009    1.087378
             |
 ethnicity_5 |
      Mixed  |   1.188312   .1500125     1.37   0.172     .9278437      1.5219
Asian or ..  |   1.189831   .1486566     1.39   0.164     .9314009    1.519965
      Black  |   1.102705   .1428475     0.75   0.450     .8554454    1.421433
      Other  |   1.123794   .1462078     0.90   0.370      .870851    1.450206
             |
         imd |   .9685664   .0271409    -1.14   0.254     .9168056    1.023249
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                                 ("Confounders+IMD")                          
>                    ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }       
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+IMD")                  
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1117907   .3848755     0.29   0.771    -.6425514    .8661327
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   -.375368   .6257289    -0.60   0.549    -1.601774    .8510381
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1200301    .532131    -0.23   0.822    -1.162988    .9229275
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0201751   .5904281     0.03   0.973    -1.137043    1.177393
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3669801   .3181377     1.15   0.249    -.2565583    .9905184
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.080714   .3360403     3.22   0.001     .4220868    1.739341
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    -.19824    .483009    -0.41   0.681     -1.14492    .7484402
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.172462   .3943812     2.97   0.003     .3994887    1.945435
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1711947   .2965358    -0.58   0.564    -.7523942    .4100047
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2378169   .3608725     0.66   0.510    -.4694802    .9451139
------------------------------------------------------------------------------

.         
.         * Confounders with residential care
.         stcox i.`exp'##i.agebroad age1 age2 age3 male   ///
>                                 i.ethnicity_5 resid_care_ldr,           ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath1
   analysis time _t:  stime_coviddeath1/365.25

Iteration 0:   log pseudolikelihood = -4435.1167
Iteration 1:   log pseudolikelihood = -4422.3824
Iteration 2:   log pseudolikelihood = -4421.0276
Iteration 3:   log pseudolikelihood = -4421.0096
Iteration 4:   log pseudolikelihood = -4421.0096
Refining estimates:
Iteration 0:   log pseudolikelihood = -4421.0096

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       30,365             Number of obs    =      30,365
No. of failures      =          648
Time at risk         =  14525.01848
                                                Wald chi2(26)    =       32.51
Log pseudolikelihood =   -4421.0096             Prob > chi2      =      0.1767

                       (Std. Err. adjusted for 1,207 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.211764   .1825657     1.27   0.202      .901935    1.628025
 DS and LDR  |   .7512224   .1590719    -1.35   0.177     .4960506    1.137656
CP but no..  |   .9194346   .1403118    -0.55   0.582     .6817449    1.239995
 CP and LDR  |   .9048509   .1623775    -0.56   0.577     .6365419    1.286255
LD with n..  |   .9824844   .1067347    -0.16   0.871     .7940599    1.215621
             |
    agebroad |
     65-<75  |   .9203241    .229405    -0.33   0.739     .5646322    1.500085
        75+  |   .6017436   .2674409    -1.14   0.253     .2518261    1.437879
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9223746   .3806863    -0.20   0.845     .4107674    2.071184
DS but no.. #|
        75+  |   .5648468   .3661545    -0.88   0.378     .1585442    2.012384
 DS and LDR #|
     65-<75  |   1.171909   .6727851     0.28   0.782     .3803861    3.610464
 DS and LDR #|
        75+  |   1.345037   .8390438     0.48   0.635     .3960484    4.567935
CP but no.. #|
     65-<75  |   1.571454   .5549651     1.28   0.201     .7864958    3.139835
CP but no.. #|
        75+  |   3.198013   1.182634     3.14   0.002     1.549186    6.601716
 CP and LDR #|
     65-<75  |   .9055592   .4718612    -0.19   0.849     .3261218    2.514513
 CP and LDR #|
        75+  |   3.572499   1.571039     2.90   0.004     1.508859    8.458547
LD with n.. #|
     65-<75  |   .8555601   .2752245    -0.48   0.628     .4554368    1.607211
LD with n.. #|
        75+  |   1.289867   .4895368     0.67   0.502     .6130456    2.713921
             |
        age1 |   .9985739   .0241133    -0.06   0.953     .9524137    1.046971
        age2 |   1.008441   .0606634     0.14   0.889     .8962844    1.134632
        age3 |   .9778451   .1547204    -0.14   0.887     .7171136    1.333375
        male |   .9364716   .0713575    -0.86   0.389      .806556    1.087313
             |
 ethnicity_5 |
      Mixed  |   1.188869   .1500312     1.37   0.170     .9283577    1.522484
Asian or ..  |   1.191511   .1488086     1.40   0.161     .9328053    1.521967
      Black  |   1.103624    .142984     0.76   0.447     .8561319    1.422662
      Other  |   1.124107   .1462491     0.90   0.369     .8710926    1.450612
             |
resid_care~r |   1.054466   .2055851     0.27   0.786      .719577    1.545212
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                                 ("Confounders+Resid")                        
>                    ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }               
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+Resid")                
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1112736   .3848114     0.29   0.772    -.6429429    .8654901
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.3791233   .6256727    -0.61   0.545    -1.605419    .8471727
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1274197   .5323232    -0.24   0.811    -1.170754    .9159145
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0103676   .5897178     0.02   0.986    -1.145458    1.166193
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3680048   .3180577     1.16   0.247    -.2553768    .9913863
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.078533   .3363295     3.21   0.001     .4193397    1.737727
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1991878   .4829051    -0.41   0.680    -1.145664    .7472889
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    1.17328    .394482     2.97   0.003     .4001097    1.946451
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1736697   .2965598    -0.59   0.558    -.7549163    .4075769
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2368686   .3610107     0.66   0.512    -.4706995    .9444366
------------------------------------------------------------------------------

.         
.         * Confounders with physical comorbidities that are indicators for vac
> cination 
.         stcox i.`exp'##i.agebroad age1 age2 age3 male           ///
>                                 i.ethnicity_5                                
>                    ///
>                                 obese40                                      
>                            ///
>                                 respiratory asthma_severe                    
>            ///
>                                 cardiac af dvt_pe i.diabcat                  
>            ///
>                                 liver stroke tia dementia                    
>            ///
>                                 i.kidneyfn                                   
>                            ///
>                                 spleen transplant dialysis                   
>            ///
>                                 immunosuppression cancerHaem                 
>    ///
>                                 autoimmune ibd cancerExhaem1yr,              
>    ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath1
   analysis time _t:  stime_coviddeath1/365.25

Iteration 0:   log pseudolikelihood = -687.13142
Iteration 1:   log pseudolikelihood = -667.73729
Iteration 2:   log pseudolikelihood = -661.40294
Iteration 3:   log pseudolikelihood = -660.87495
Iteration 4:   log pseudolikelihood = -660.71452
Iteration 5:   log pseudolikelihood = -660.65588
Iteration 6:   log pseudolikelihood = -660.63432
Iteration 7:   log pseudolikelihood =  -660.6264
Iteration 8:   log pseudolikelihood = -660.62348
Iteration 9:   log pseudolikelihood = -660.62241
Iteration 10:  log pseudolikelihood = -660.62201
Iteration 11:  log pseudolikelihood = -660.62187
Iteration 12:  log pseudolikelihood = -660.62182
Iteration 13:  log pseudolikelihood =  -660.6218
Iteration 14:  log pseudolikelihood = -660.62179
Iteration 15:  log pseudolikelihood = -660.62179
Iteration 16:  log pseudolikelihood = -660.62179
Iteration 17:  log pseudolikelihood = -660.62178
Iteration 18:  log pseudolikelihood = -660.62178
Iteration 19:  log pseudolikelihood = -660.62178
Iteration 20:  log pseudolikelihood = -660.62178
Iteration 21:  log pseudolikelihood = -660.62178
Iteration 22:  log pseudolikelihood = -660.62178
Iteration 23:  log pseudolikelihood = -660.62178
Iteration 24:  log pseudolikelihood = -660.62178
Iteration 25:  log pseudolikelihood = -660.62178
Iteration 26:  log pseudolikelihood = -660.62178
Iteration 27:  log pseudolikelihood = -660.62178
Iteration 28:  log pseudolikelihood = -660.62178
Iteration 29:  log pseudolikelihood = -660.62178
Iteration 30:  log pseudolikelihood = -660.62178
Iteration 31:  log pseudolikelihood = -660.62178
Iteration 32:  log pseudolikelihood = -660.62178
Iteration 33:  log pseudolikelihood = -660.62178
Refining estimates:
Iteration 0:   log pseudolikelihood = -660.62178
Iteration 1:   log pseudolikelihood = -660.62178
Iteration 2:   log pseudolikelihood = -660.62178

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        6,087             Number of obs    =       6,087
No. of failures      =          131
Time at risk         =  2916.769336
                                                Wald chi2(48)    =    59924.64
Log pseudolikelihood =   -660.62178             Prob > chi2      =      0.0000

                         (Std. Err. adjusted for 986 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.316317   .4295992     0.84   0.400     .6943177    2.495528
 DS and LDR  |   .2551507   .1834862    -1.90   0.058     .0623265    1.044529
CP but no..  |    .758273   .2615064    -0.80   0.422     .3857189    1.490666
 CP and LDR  |   .7771202   .3162215    -0.62   0.535     .3500434     1.72526
LD with n..  |   1.093948   .2458347     0.40   0.689     .7042266    1.699342
             |
    agebroad |
     65-<75  |   .9187439    .601727    -0.13   0.897     .2545095    3.316538
        75+  |   1.696719   1.829627     0.49   0.624     .2049896    14.04391
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .8110294   .9777312    -0.17   0.862     .0763618    8.613845
DS but no.. #|
        75+  |   1.073011    1.34363     0.06   0.955     .0921988    12.48772
 DS and LDR #|
     65-<75  |    6.53412   8.627055     1.42   0.155     .4912906     86.9032
 DS and LDR #|
        75+  |   6.240583   8.320873     1.37   0.170     .4573795    85.14785
CP but no.. #|
     65-<75  |   2.42e-15   1.50e-15   -54.08   0.000     7.13e-16    8.18e-15
CP but no.. #|
        75+  |   8.594459    7.68883     2.40   0.016     1.488371    49.62791
 CP and LDR #|
     65-<75  |   2.29e-15   1.53e-15   -50.35   0.000     6.15e-16    8.49e-15
 CP and LDR #|
        75+  |   11.36875   10.33478     2.67   0.007      1.91393    67.53038
LD with n.. #|
     65-<75  |   1.635405   1.202069     0.67   0.503     .3872292    6.906893
LD with n.. #|
        75+  |   .9740452    .949639    -0.03   0.978     .1441138    6.583434
             |
        age1 |   1.002997   .0498061     0.06   0.952     .9099791    1.105524
        age2 |   1.008403   .1225861     0.07   0.945     .7946173    1.279706
        age3 |   .8947576   .2858426    -0.35   0.728     .4783849     1.67353
        male |   .9833025   .1706649    -0.10   0.923     .6997614    1.381733
             |
 ethnicity_5 |
      Mixed  |   1.028387   .3199036     0.09   0.928     .5589467    1.892093
Asian or ..  |   1.525441   .4255989     1.51   0.130     .8828959    2.635609
      Black  |   1.372048   .3806176     1.14   0.254     .7965976    2.363196
      Other  |   1.700298    .492072     1.83   0.067     .9642381    2.998235
             |
     obese40 |    1.26165    .254856     1.15   0.250     .8491696    1.874492
 respiratory |   1.337088   .2810125     1.38   0.167     .8856556    2.018621
asthma_sev~e |   .8369405   .2550342    -0.58   0.559     .4605902    1.520808
     cardiac |   1.203383   .2402501     0.93   0.354     .8137015    1.779682
          af |   .9540104   .2198117    -0.20   0.838     .6073366    1.498569
      dvt_pe |   .8361819   .2086404    -0.72   0.473     .5127584    1.363606
             |
     diabcat |
Controlle..  |   1.239484   .2692915     0.99   0.323     .8096702    1.897465
Uncontrol..  |   .6329521   .3712574    -0.78   0.436     .2004931    1.998215
Diabetes,..  |   8.427174   9.254472     1.94   0.052     .9793045    72.51806
             |
       liver |    .912966   .2063713    -0.40   0.687     .5861987    1.421885
      stroke |   .9746434   .2216808    -0.11   0.910     .6240819    1.522124
         tia |   .9640681   .2240644    -0.16   0.875     .6113294    1.520338
    dementia |   .8500797     .19237    -0.72   0.473     .5455515    1.324596
             |
    kidneyfn |
Stage 3a/..  |   1.771009   1.861275     0.54   0.587     .2257535    13.89335
Stage 4/5..  |   1.311023   .3712458     0.96   0.339      .752616    2.283743
             |
      spleen |   .9219463   .1690109    -0.44   0.658     .6436706    1.320528
  transplant |   1.062912   .2509513     0.26   0.796     .6691606    1.688357
    dialysis |   .7810011    .253132    -0.76   0.446     .4137775    1.474132
immunosupp~n |   .7303772   .1383458    -1.66   0.097     .5038662    1.058715
  cancerHaem |   .9165416   .0727953    -1.10   0.273      .784416    1.070922
  autoimmune |   1.041704   .2181784     0.20   0.845     .6909799    1.570447
         ibd |   .8268964   .2108226    -0.75   0.456     .5016858     1.36292
cancerExha~r |   1.407709   1.458898     0.33   0.741     .1846542    10.73165
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'") ///
>                         ("Confounders+Comorb")                               
>            ///
>                         (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+Comorb")               
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0653863   1.167383     0.06   0.955    -2.222641    2.353414
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3453057   1.173217     0.29   0.769    -1.954158     2.64477
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .5111367   1.112866     0.46   0.646    -1.670041    2.692314
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .4651726   1.131647     0.41   0.681    -1.752815     2.68316
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -33.93344   .5304229   -63.97   0.000    -34.97305   -32.89383
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.874406   .7800738     2.40   0.016     .3454893    3.403322
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -33.96413   .5354019   -63.44   0.000     -35.0135   -32.91476
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   2.178708   .8191297     2.66   0.008     .5732431    3.784172
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .5816836   .7136327     0.82   0.415    -.8170108    1.980378
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0634953   .9472155     0.07   0.947    -1.793013    1.920004
------------------------------------------------------------------------------

.         
.         * All variables
.         stcox i.`exp'##i.agebroad age1 age2 age3 male           ///
>                                 i.ethnicity_5 imd resid_care_ldr             
>    ///
>                                 obese40                                      
>                            ///
>                                 respiratory asthma_severe                    
>            ///
>                                 cardiac af dvt_pe i.diabcat                  
>            ///
>                                 liver stroke tia dementia                    
>            ///
>                                 i.kidneyfn                                   
>                            ///
>                                 spleen transplant dialysis                   
>            ///
>                                 immunosuppression cancerHaem                 
>    ///
>                                 autoimmune ibd cancerExhaem1yr,              
>    ///
>                                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath1
   analysis time _t:  stime_coviddeath1/365.25

Iteration 0:   log pseudolikelihood = -687.13142
Iteration 1:   log pseudolikelihood = -667.37531
Iteration 2:   log pseudolikelihood = -660.91073
Iteration 3:   log pseudolikelihood = -660.38055
Iteration 4:   log pseudolikelihood = -660.22012
Iteration 5:   log pseudolikelihood = -660.16149
Iteration 6:   log pseudolikelihood = -660.13994
Iteration 7:   log pseudolikelihood = -660.13202
Iteration 8:   log pseudolikelihood =  -660.1291
Iteration 9:   log pseudolikelihood = -660.12803
Iteration 10:  log pseudolikelihood = -660.12763
Iteration 11:  log pseudolikelihood = -660.12749
Iteration 12:  log pseudolikelihood = -660.12744
Iteration 13:  log pseudolikelihood = -660.12742
Iteration 14:  log pseudolikelihood = -660.12741
Iteration 15:  log pseudolikelihood = -660.12741
Iteration 16:  log pseudolikelihood = -660.12741
Iteration 17:  log pseudolikelihood = -660.12741
Iteration 18:  log pseudolikelihood = -660.12741
Iteration 19:  log pseudolikelihood =  -660.1274
Iteration 20:  log pseudolikelihood =  -660.1274
Iteration 21:  log pseudolikelihood =  -660.1274
Iteration 22:  log pseudolikelihood =  -660.1274
Iteration 23:  log pseudolikelihood =  -660.1274
Iteration 24:  log pseudolikelihood =  -660.1274
Iteration 25:  log pseudolikelihood =  -660.1274
Iteration 26:  log pseudolikelihood =  -660.1274
Iteration 27:  log pseudolikelihood =  -660.1274
Iteration 28:  log pseudolikelihood =  -660.1274
Iteration 29:  log pseudolikelihood =  -660.1274
Iteration 30:  log pseudolikelihood =  -660.1274
Iteration 31:  log pseudolikelihood =  -660.1274
Iteration 32:  log pseudolikelihood =  -660.1274
Refining estimates:
Iteration 0:   log pseudolikelihood =  -660.1274
Iteration 1:   log pseudolikelihood =  -660.1274

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        6,087             Number of obs    =       6,087
No. of failures      =          131
Time at risk         =  2916.769336
                                                Wald chi2(50)    =    53343.53
Log pseudolikelihood =    -660.1274             Prob > chi2      =      0.0000

                         (Std. Err. adjusted for 986 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.325451   .4334617     0.86   0.389     .6982256    2.516123
 DS and LDR  |   .2521242   .1814585    -1.91   0.056     .0615161    1.033333
CP but no..  |   .7617305   .2636571    -0.79   0.432     .3865234     1.50116
 CP and LDR  |   .7840958    .318515    -0.60   0.549     .3536669    1.738376
LD with n..  |   1.095816   .2462786     0.41   0.684      .705399    1.702317
             |
    agebroad |
     65-<75  |   .9309931   .6112211    -0.11   0.913      .257105    3.371183
        75+  |   1.735452   1.866465     0.51   0.608     .2108394    14.28477
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .8184315   .9884458    -0.17   0.868     .0767289    8.729826
DS but no.. #|
        75+  |   1.074577   1.340263     0.06   0.954     .0932351    12.38499
 DS and LDR #|
     65-<75  |   6.554808   8.684358     1.42   0.156     .4884464     87.9636
 DS and LDR #|
        75+  |   6.421166   8.587088     1.39   0.164     .4669751    88.29458
CP but no.. #|
     65-<75  |   1.79e-14   1.11e-14   -50.81   0.000     5.28e-15    6.07e-14
CP but no.. #|
        75+  |   8.643497     7.7594     2.40   0.016     1.487828    50.21416
 CP and LDR #|
     65-<75  |   1.68e-14   1.13e-14   -47.42   0.000     4.54e-15    6.25e-14
 CP and LDR #|
        75+  |    10.9725   9.948218     2.64   0.008     1.855941    64.87053
LD with n.. #|
     65-<75  |   1.627086   1.199468     0.66   0.509     .3836324      6.9009
LD with n.. #|
        75+  |   .9728085    .949585    -0.03   0.977     .1435973    6.590349
             |
        age1 |   1.003582   .0499614     0.07   0.943     .9102853    1.106441
        age2 |    1.00703   .1226729     0.06   0.954     .7931441    1.278595
        age3 |   .8964997    .286584    -0.34   0.733     .4791226    1.677466
        male |   .9833527   .1708152    -0.10   0.923     .6995999    1.382194
             |
 ethnicity_5 |
      Mixed  |   1.028676   .3201035     0.09   0.928     .5589867    1.893021
Asian or ..  |    1.52805   .4255176     1.52   0.128     .8853249    2.637379
      Black  |     1.3773   .3815866     1.16   0.248     .8002024    2.370595
      Other  |    1.70756    .493114     1.85   0.064     .9695357    3.007381
             |
         imd |   .9972196   .0643292    -0.04   0.966     .8787816     1.13162
resid_care~r |   .6611347   .2481959    -1.10   0.270      .316768    1.379872
     obese40 |   1.268786   .2560516     1.18   0.238     .8542967    1.884378
 respiratory |   1.335905   .2803469     1.38   0.168     .8854141    2.015602
asthma_sev~e |   .8392064   .2558483    -0.57   0.565     .4617039    1.525366
     cardiac |   1.207733   .2404842     0.95   0.343     .8174846    1.784278
          af |   .9565352   .2210707    -0.19   0.848     .6080993    1.504622
      dvt_pe |   .8325401   .2078313    -0.73   0.463     .5104055    1.357985
             |
     diabcat |
Controlle..  |   1.241146   .2698085     0.99   0.320     .8105562    1.900478
Uncontrol..  |   .6358027    .373206    -0.77   0.440     .2012244    2.008926
Diabetes,..  |   8.564693    9.42218     1.95   0.051     .9914913    73.98347
             |
       liver |   .9070427   .2041982    -0.43   0.665     .5834462    1.410116
      stroke |   .9783778   .2224777    -0.10   0.923      .626539    1.527795
         tia |    .958385   .2219584    -0.18   0.854     .6087022    1.508951
    dementia |   .8450243   .1908676    -0.75   0.456     .5427581    1.315625
             |
    kidneyfn |
Stage 3a/..  |   1.778125   1.865214     0.55   0.583     .2275468    13.89485
Stage 4/5..  |   1.313537    .371809     0.96   0.335     .7542268    2.287615
             |
      spleen |   .9194966    .168477    -0.46   0.647     .6420764    1.316781
  transplant |   1.057887   .2497535     0.24   0.812     .6660115    1.680339
    dialysis |   .7841121   .2550889    -0.75   0.455     .4144418    1.483518
immunosupp~n |   .7292826   .1380987    -1.67   0.095     .5031648    1.057016
  cancerHaem |   .9175837   .0731208    -1.08   0.280     .7849009    1.072696
  autoimmune |   1.037568    .216384     0.18   0.860     .6894446    1.561471
         ibd |   .8311846   .2123333    -0.72   0.469     .5037913    1.371337
cancerExha~r |   1.428776   1.484951     0.34   0.731     .1863358     10.9555
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                         ("All")                                              
>                                    ///
>                         (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )     ///
>                                         ("All")                              
>                                    ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0813875   1.170214     0.07   0.945    -2.212189    2.374964
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3536803   1.170413     0.30   0.763    -1.940287    2.647648
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .5023651   1.114104     0.45   0.652    -1.681239     2.68597
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .4817661   1.131565     0.43   0.670     -1.73606    2.699592
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -31.92677   .5318222   -60.03   0.000    -32.96912   -30.88441
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.884645   .7826243     2.41   0.016     .3507294     3.41856
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -31.95788   .5341003   -59.83   0.000     -33.0047   -30.91106
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   2.152168   .8162982     2.64   0.008     .5522534    3.752084
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .5782901   .7153649     0.81   0.419    -.8237994     1.98038
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0639314    .949041     0.07   0.946    -1.796155    1.924018
------------------------------------------------------------------------------

. 
. postclose `ldrresults'

. 
. use `ldrfile', clear

. 
. 
. *************************
. *  Tidy output for HRs  *
. *************************
. 
. * Outcome
. rename outcome out

. gen outcome     = 1 if out=="coviddeath"

. replace outcome = 2 if out=="covidadmission"
(0 real changes made)

. replace outcome = 3 if out=="composite"
(0 real changes made)

. 
. label define outcome    1 "COVID-19 death"              ///
>                                                 2 "COVID-19 admission"  ///
>                                                 3 "Composite"

. label values outcome outcome

. drop out

. 
. * Exposure
. rename exposure exp

. gen     exposure = 1 if exp=="ldr"
(90 missing values generated)

. replace exposure = 2 if exp=="ldr_cat"
(0 real changes made)

. replace exposure = 3 if exp=="ldr_carecat"
(0 real changes made)

. replace exposure = 4 if exp=="ds"
(0 real changes made)

. replace exposure = 5 if exp=="cp"
(0 real changes made)

. replace exposure = 6 if exp=="ldr_group"
(90 real changes made)

. 
. label define exposure   1 "Learning disability register"        ///
>                                                 2 "LDR Severe vs mild"       
>                    ///
>                                                 3 "LDR by residential care"  
>                    ///
>                                                 4 "Down's syndrome"          
>                            ///
>                                                 5 "Cerebral Palsy"           
>                            ///
>                                                 6 "Combined grouping"        
>                    

. label values exposure exposure                                          

. drop exp

. 
. * Age categories
. label define agebroad   1 "16-<65"              ///
>                                                 2 "65-<75"              ///
>                                                 3 "75+"

. label values agebroad agebroad

. 
. 
. * Categories of exposure
. gen category     = "No"                                         if expcat==0
(75 missing values generated)

. replace category = "Yes"                                        if inlist(exp
> osure, 1, 4, 5) & expcat==1
(0 real changes made)

. 
. replace category = "LDR, mild"                          if inlist(exposure, 2
> ) & expcat==1
(0 real changes made)

. replace category = "LDR, profound"                      if inlist(exposure, 2
> ) & expcat==2
(0 real changes made)

. 
. replace category = "LDR, community"             if inlist(exposure, 3) & expc
> at==1
(0 real changes made)

. replace category = "LDR, residential care"      if inlist(exposure, 3) & expc
> at==2
(0 real changes made)

. 
. replace category = "DS but not LDR"             if inlist(exposure, 6) & expc
> at==1
variable category was str2 now str14
(15 real changes made)

. replace category = "DS and LDR"                         if inlist(exposure, 6
> ) & expcat==2
(15 real changes made)

. replace category = "CP but not LDR"             if inlist(exposure, 6) & expc
> at==3
(15 real changes made)

. replace category = "CP and LDR"                         if inlist(exposure, 6
> ) & expcat==4
(15 real changes made)

. replace category = "LDR with no DS or CP"       if inlist(exposure, 6) & expc
> at==5
variable category was str14 now str20
(15 real changes made)

. 
. * Model adjustment
. gen     adjustment = 1 if model=="Confounders"
(72 missing values generated)

. replace adjustment = 2 if model=="Confounders+IMD"
(18 real changes made)

. replace adjustment = 3 if model=="Confounders+Resid"
(18 real changes made)

. replace adjustment = 4 if model=="Confounders+Comorb"
(18 real changes made)

. replace adjustment = 5 if model=="All"
(18 real changes made)

. label define adj        1 "Confounders"                                      
>    ///     
>                                         2 "Confounders with IMD"             
>            ///
>                                         3 "Confounders with care"            
>            ///
>                                         4 "Confounders with comorbidities"   
>    ///
>                                         5 "All"

. label values adjustment adj

. drop model

. 
. * Hazard ratio with 95% confidence interval
. gen cl = exp(lnhr - invnorm(0.975)*sehr)

. gen cu = exp(lnhr + invnorm(0.975)*sehr)

. gen hr = exp(lnhr)

. 
. gen hr_ci =   string(round(hr, 0.01)) + " (" ///
>                         + string(round(cl, 0.01)) + ", " ///
>                         + string(round(cu, 0.01)) + ")"

. replace hr_ci = "" if expcat==0
(15 real changes made)

. drop cl cu hr lnhr sehr

. 
. * Put in wide format
. reshape wide hr_ci, i(wave outcome exposure expcat agebroad) j(adjust)
(note: j = 1 2 3 4 5)

Data                               long   ->   wide
-----------------------------------------------------------------------------
Number of obs.                       90   ->      18
Number of variables                   8   ->      11
j variable (5 values)        adjustment   ->   (dropped)
xij variables:
                                  hr_ci   ->   hr_ci1 hr_ci2 ... hr_ci5
-----------------------------------------------------------------------------

. rename hr_ci1 hr_conf

. rename hr_ci2 hr_conf_imd

. rename hr_ci3 hr_conf_resid

. rename hr_ci4 hr_conf_comorb

. 
. 
. order wave outcome exposure agebroad category hr*

. sort wave outcome exposure agebroad expcat

. 
. * Save data
. outsheet using "output/ldcox_inter_wave`i'_`out'_`exp'", replace
(note: file output/ldcox_inter_wave1_coviddeath_ldr_group.out not found)

. 
. log close
      name:  <unnamed>
       log:  /workspace/logs/AL006_cox_regression_inter_wave1_coviddeath_ldr_gr
> oup.log
  log type:  text
 closed on:  25 Feb 2021, 20:23:52
-------------------------------------------------------------------------------
