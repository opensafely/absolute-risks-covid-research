-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /workspace/logs/AL006_cox_regression_inter_wave2_coviddeath_ldr_gr
> oup.log
  log type:  text
 opened on:  25 Feb 2021, 20:24:20

. 
. 
. * Categories of various exposures
. local lo_ldr            = 0

. local hi_ldr            = 1

. local lo_ldr_cat        = 0

. local hi_ldr_cat        = 2

. local hi_ldr            = 1

. local lo_ldr_carecat= 0

. local hi_ldr_carecat= 2

. local lo_ds             = 0

. local hi_ds             = 1

. local lo_cp             = 0

. local hi_cp             = 1

. local lo_ldr_group      = 0

. local hi_ldr_group      = 5

. 
. * Open temporary file to post results
. tempfile ldrfile

. tempname ldrresults

. 
. postfile `ldrresults'   wave str15(outcome) str15(exposure) str20(model)     
>    ///
>                                                 expcat agebroad lnhr sehr usi
> ng `ldrfile'

. 
. 
.         * Open dataset (complete case ethnicity)
.         use "analysis/data_ldanalysis_cohort`i'.dta", clear 
(Analysis dataset, wave 2 (1 Sept 20 - latest), for learning disability work)

.         drop if ethnicity_5>=.
(11,245 observations deleted)

. 
.         * Only keep data for adults
.         keep if child==0
(6,499 observations deleted)

. 
.         
.         /*  Declare data to be survival  */
. 
.         stset stime_`out'`i', fail(`out'`i') scale(365.25)

     failure event:  coviddeath2 != 0 & coviddeath2 < .
obs. time interval:  (0, stime_coviddeath2]
 exit on or before:  failure
    t for analysis:  time/365.25

------------------------------------------------------------------------------
     27,126  total observations
          0  exclusions
------------------------------------------------------------------------------
     27,126  observations remaining, representing
        571  failures in single-record/single-failure data
 11,482.376  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  .4462697

. 
.         
.                 
.         /*  Fit Cox models  */
.         
.         * Confounder only model
.         stcox i.`exp'##i.agebroad age1 age2 age3 male i.ethnicity_5,    ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath2
   analysis time _t:  stime_coviddeath2/365.25

Iteration 0:   log pseudolikelihood =  -3842.445
Iteration 1:   log pseudolikelihood = -3833.0978
Iteration 2:   log pseudolikelihood = -3832.8798
Iteration 3:   log pseudolikelihood = -3832.8789
Iteration 4:   log pseudolikelihood = -3832.8789
Refining estimates:
Iteration 0:   log pseudolikelihood = -3832.8789

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       27,126             Number of obs    =      27,126
No. of failures      =          571
Time at risk         =  11482.37645
                                                Wald chi2(25)    =       21.78
Log pseudolikelihood =   -3832.8789             Prob > chi2      =      0.6484

                       (Std. Err. adjusted for 1,203 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.155756   .1939395     0.86   0.388     .8318244    1.605833
 DS and LDR  |   1.178553   .2300807     0.84   0.400     .8038498    1.727919
CP but no..  |   .9388984   .1574229    -0.38   0.707     .6759267     1.30418
 CP and LDR  |   1.073775   .1955183     0.39   0.696     .7514883    1.534279
LD with n..  |   .9959967   .1230839    -0.03   0.974     .7817494    1.268961
             |
    agebroad |
     65-<75  |   1.143161   .3274054     0.47   0.640     .6521088    2.003985
        75+  |   1.083385   .5006908     0.17   0.862     .4379216    2.680212
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9520563   .4025536    -0.12   0.907     .4156741    2.180581
DS but no.. #|
        75+  |   1.126138   .5054929     0.26   0.791     .4672079    2.714395
 DS and LDR #|
     65-<75  |   .3878452   .2848721    -1.29   0.197     .0919288     1.63631
 DS and LDR #|
        75+  |    .753844   .4678379    -0.46   0.649     .2233692    2.544133
CP but no.. #|
     65-<75  |   .5632209   .2923293    -1.11   0.269     .2036472    1.557683
CP but no.. #|
        75+  |   1.130997   .5243669     0.27   0.791     .4558446    2.806119
 CP and LDR #|
     65-<75  |   1.434545   .6284135     0.82   0.410     .6079091    3.385241
 CP and LDR #|
        75+  |   1.014454   .5374953     0.03   0.978     .3591153    2.865698
LD with n.. #|
     65-<75  |   1.132353   .3392388     0.41   0.678     .6294662       2.037
LD with n.. #|
        75+  |   1.388888   .4393797     1.04   0.299      .747113     2.58195
             |
        age1 |   .9978823    .027863    -0.08   0.939     .9447392    1.054015
        age2 |   1.015318   .0685757     0.23   0.822     .8894287    1.159027
        age3 |   .9503991   .1671418    -0.29   0.772     .6733015    1.341536
        male |    1.08507   .0878985     1.01   0.314     .9257722    1.271777
             |
 ethnicity_5 |
      Mixed  |   1.156798   .1642425     1.03   0.305     .8757977    1.527958
Asian or ..  |   1.225034   .1612668     1.54   0.123     .9464415    1.585633
      Black  |   1.370393   .1819525     2.37   0.018     1.056399    1.777717
      Other  |   1.061133   .1460967     0.43   0.666      .810171    1.389835
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")       
>       ///
>                                 ("Confounders")                              
>                            ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders")                      
>                                    ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0956232   .3901046     0.25   0.806    -.6689677    .8602142
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2635483   .4113025     0.64   0.522    -.5425899    1.069686
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.7828615    .730886    -1.07   0.284    -2.215372    .6496488
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1182824   .5899676    -0.20   0.841    -1.274598    1.038033
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.6371313   .4873528    -1.31   0.191    -1.592325    .3180627
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0600516   .4339617     0.14   0.890    -.7904977    .9106009
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .432028   .4009747     1.08   0.281     -.353868    1.217924
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0855305   .4935417     0.17   0.862    -.8817934    1.052854
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1202862   .2757259     0.44   0.663    -.4201265     .660699
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3244917   .2932245     1.11   0.268    -.2502177    .8992012
------------------------------------------------------------------------------

.         
.         * Confounders with deprivation
.         stcox i.`exp'##i.agebroad age1 age2 age3 male i.ethnicity_5 imd, ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath2
   analysis time _t:  stime_coviddeath2/365.25

Iteration 0:   log pseudolikelihood =  -3842.445
Iteration 1:   log pseudolikelihood = -3833.0912
Iteration 2:   log pseudolikelihood = -3832.8731
Iteration 3:   log pseudolikelihood = -3832.8723
Iteration 4:   log pseudolikelihood = -3832.8723
Refining estimates:
Iteration 0:   log pseudolikelihood = -3832.8723

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       27,126             Number of obs    =      27,126
No. of failures      =          571
Time at risk         =  11482.37645
                                                Wald chi2(26)    =       21.83
Log pseudolikelihood =   -3832.8723             Prob > chi2      =      0.6980

                       (Std. Err. adjusted for 1,203 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.155673    .193966     0.86   0.389     .8317081    1.605828
 DS and LDR  |   1.178666   .2300696     0.84   0.400     .8039712    1.727989
CP but no..  |    .938805   .1573802    -0.38   0.706     .6758977    1.303977
 CP and LDR  |   1.073715   .1955315     0.39   0.696     .7514136    1.534261
LD with n..  |   .9959595   .1230715    -0.03   0.974     .7817323    1.268894
             |
    agebroad |
     65-<75  |   1.142972   .3271504     0.47   0.641     .6522257    2.002964
        75+  |   1.083786   .5012575     0.17   0.862      .437782    2.683054
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9528661   .4026551    -0.11   0.909     .4162339    2.181355
DS but no.. #|
        75+  |    1.12644   .5058209     0.27   0.791     .4671766    2.716031
 DS and LDR #|
     65-<75  |   .3876153   .2847905    -1.29   0.197     .0918338    1.636061
 DS and LDR #|
        75+  |    .753849   .4678188    -0.46   0.649     .2233836    2.544003
CP but no.. #|
     65-<75  |   .5633252   .2922508    -1.11   0.269      .203779    1.557253
CP but no.. #|
        75+  |   1.131537   .5245868     0.27   0.790     .4560861    2.807311
 CP and LDR #|
     65-<75  |   1.434736   .6284039     0.82   0.410     .6080678     3.38526
 CP and LDR #|
        75+  |   1.014291   .5375006     0.03   0.979     .3589942    2.865745
LD with n.. #|
     65-<75  |   1.132298   .3392705     0.41   0.678     .6293829    2.037071
LD with n.. #|
        75+  |   1.388101   .4391629     1.04   0.300     .7466559    2.580604
             |
        age1 |   .9978822   .0278617    -0.08   0.939     .9447415    1.054012
        age2 |   1.015327   .0685765     0.23   0.822     .8894357    1.159036
        age3 |   .9503617   .1671463    -0.29   0.772     .6732597    1.341514
        male |   1.085104    .087904     1.01   0.313     .9257972    1.271824
             |
 ethnicity_5 |
      Mixed  |   1.156742   .1642201     1.03   0.305     .8757769    1.527847
Asian or ..  |   1.224964   .1612509     1.54   0.123     .9463973    1.585525
      Black  |   1.370176   .1818544     2.37   0.018     1.056336    1.777259
      Other  |   1.060891   .1459231     0.43   0.667     .8101963    1.389158
             |
         imd |   .9959758   .0351518    -0.11   0.909     .9294084    1.067311
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                                 ("Confounders+IMD")                          
>                    ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }       
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+IMD")                  
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .096402   .3897065     0.25   0.805    -.6674088    .8602127
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2637448    .411405     0.64   0.521    -.5425942    1.070084
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.7833586   .7311217    -1.07   0.284    -2.216331    .6496137
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1181799   .5899413    -0.20   0.841    -1.274444    1.038084
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.6370457   .4872473    -1.31   0.191    -1.592033    .3179414
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0604291   .4339825     0.14   0.889     -.790161    .9110193
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .4321058   .4009235     1.08   0.281    -.3536898    1.217901
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0853145   .4936908     0.17   0.863    -.8823016    1.052931
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1202002   .2757962     0.44   0.663    -.4203503    .6607508
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3238877   .2932318     1.10   0.269    -.2508362    .8986115
------------------------------------------------------------------------------

.         
.         * Confounders with residential care
.         stcox i.`exp'##i.agebroad age1 age2 age3 male   ///
>                                 i.ethnicity_5 resid_care_ldr,           ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath2
   analysis time _t:  stime_coviddeath2/365.25

Iteration 0:   log pseudolikelihood =  -3842.445
Iteration 1:   log pseudolikelihood = -3831.6317
Iteration 2:   log pseudolikelihood = -3831.3723
Iteration 3:   log pseudolikelihood = -3831.3714
Iteration 4:   log pseudolikelihood = -3831.3714
Refining estimates:
Iteration 0:   log pseudolikelihood = -3831.3714

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       27,126             Number of obs    =      27,126
No. of failures      =          571
Time at risk         =  11482.37645
                                                Wald chi2(26)    =       24.92
Log pseudolikelihood =   -3831.3714             Prob > chi2      =      0.5234

                       (Std. Err. adjusted for 1,203 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.152568   .1934416     0.85   0.398     .8294777    1.601504
 DS and LDR  |   1.171896   .2289122     0.81   0.417     .7991343    1.718535
CP but no..  |   .9388453   .1574534    -0.38   0.707     .6758329    1.304214
 CP and LDR  |   1.071617   .1950763     0.38   0.704     .7500451    1.531058
LD with n..  |    .990006   .1225418    -0.08   0.935     .7767425    1.261823
             |
    agebroad |
     65-<75  |   1.141485   .3268187     0.46   0.644     .6512723    2.000681
        75+  |   1.069745   .4948881     0.15   0.884     .4320114    2.648898
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   .9476913   .4007058    -0.13   0.899     .4137702    2.170574
DS but no.. #|
        75+  |   1.135185   .5095973     0.28   0.778      .470926    2.736407
 DS and LDR #|
     65-<75  |   .3868786   .2841286    -1.29   0.196     .0917152    1.631955
 DS and LDR #|
        75+  |   .7621293   .4730813    -0.44   0.662     .2257652    2.572766
CP but no.. #|
     65-<75  |   .5624944   .2919557    -1.11   0.268     .2033821    1.555692
CP but no.. #|
        75+  |    1.13354   .5255986     0.27   0.787     .4568278    2.812685
 CP and LDR #|
     65-<75  |   1.421289   .6230469     0.80   0.423     .6019264    3.355996
 CP and LDR #|
        75+  |   1.019817   .5404504     0.04   0.970     .3609353    2.881477
LD with n.. #|
     65-<75  |   1.130699   .3387156     0.41   0.682     .6285766    2.033927
LD with n.. #|
        75+  |   1.402783   .4441622     1.07   0.285     .7541803    2.609191
             |
        age1 |   .9983172   .0278627    -0.06   0.952      .945174    1.054448
        age2 |   1.014104   .0684604     0.21   0.836     .8884225    1.157566
        age3 |   .9536545   .1676349    -0.27   0.787     .6757179    1.345912
        male |   1.084015   .0877862     1.00   0.319     .9249177     1.27048
             |
 ethnicity_5 |
      Mixed  |   1.156841   .1642419     1.03   0.305     .8758402    1.527998
Asian or ..  |   1.224392   .1611952     1.54   0.124     .9459255    1.584834
      Black  |   1.369261   .1818242     2.37   0.018     1.055493    1.776305
      Other  |   1.061398    .146158     0.43   0.665     .8103357    1.390245
             |
resid_care~r |   1.510551   .3635838     1.71   0.087     .9424415     2.42112
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                                 ("Confounders+Resid")                        
>                    ///
>                                 (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }               
  6.                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+Resid")                
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0882657   .3901298     0.23   0.821    -.6763746     .852906
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2687878   .4113503     0.65   0.513    -.5374439     1.07502
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.7910211   .7307487    -1.08   0.279    -2.223262    .6412199
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.1130159    .590445    -0.19   0.848    -1.270267    1.044235
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -.6384788   .4873331    -1.31   0.190    -1.593634    .3166765
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0622407   .4339773     0.14   0.886    -.7883393    .9128206
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .4207327   .4012197     1.05   0.294    -.3656435    1.207109
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .0887916   .4936254     0.18   0.857    -.8786964     1.05628
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .1127913   .2757684     0.41   0.683    -.4277047    .6532874
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3284139   .2933303     1.12   0.263    -.2465029    .9033306
------------------------------------------------------------------------------

.         
.         * Confounders with physical comorbidities that are indicators for vac
> cination 
.         stcox i.`exp'##i.agebroad age1 age2 age3 male           ///
>                                 i.ethnicity_5                                
>                    ///
>                                 obese40                                      
>                            ///
>                                 respiratory asthma_severe                    
>            ///
>                                 cardiac af dvt_pe i.diabcat                  
>            ///
>                                 liver stroke tia dementia                    
>            ///
>                                 i.kidneyfn                                   
>                            ///
>                                 spleen transplant dialysis                   
>            ///
>                                 immunosuppression cancerHaem                 
>    ///
>                                 autoimmune ibd cancerExhaem1yr,              
>    ///
>                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath2
   analysis time _t:  stime_coviddeath2/365.25

Iteration 0:   log pseudolikelihood = -488.07844
Iteration 1:   log pseudolikelihood = -475.33886
Iteration 2:   log pseudolikelihood = -467.86878
Iteration 3:   log pseudolikelihood = -467.22736
Iteration 4:   log pseudolikelihood = -467.18713
Iteration 5:   log pseudolikelihood = -467.17916
Iteration 6:   log pseudolikelihood = -467.17625
Iteration 7:   log pseudolikelihood = -467.17517
Iteration 8:   log pseudolikelihood = -467.17478
Iteration 9:   log pseudolikelihood = -467.17463
Iteration 10:  log pseudolikelihood = -467.17458
Iteration 11:  log pseudolikelihood = -467.17456
Iteration 12:  log pseudolikelihood = -467.17455
Iteration 13:  log pseudolikelihood = -467.17455
Iteration 14:  log pseudolikelihood = -467.17455
Iteration 15:  log pseudolikelihood = -467.17455
Iteration 16:  log pseudolikelihood = -467.17455
Iteration 17:  log pseudolikelihood = -467.17455
Iteration 18:  log pseudolikelihood = -467.17455
Iteration 19:  log pseudolikelihood = -467.17455
Iteration 20:  log pseudolikelihood = -467.17455
Iteration 21:  log pseudolikelihood = -467.17455
Iteration 22:  log pseudolikelihood = -467.17455
Iteration 23:  log pseudolikelihood = -467.17455
Iteration 24:  log pseudolikelihood = -467.17455
Iteration 25:  log pseudolikelihood = -467.17455
Iteration 26:  log pseudolikelihood = -467.17455
Iteration 27:  log pseudolikelihood = -467.17455
Iteration 28:  log pseudolikelihood = -467.17455
Iteration 29:  log pseudolikelihood = -467.17455
Iteration 30:  log pseudolikelihood = -467.17455
Iteration 31:  log pseudolikelihood = -467.17455
Refining estimates:
Iteration 0:   log pseudolikelihood = -467.17455
Iteration 1:   log pseudolikelihood = -467.17455
Iteration 2:   log pseudolikelihood = -467.17455
Iteration 3:   log pseudolikelihood = -467.17455

Stratified Cox regr. -- no ties

No. of subjects      =        5,429             Number of obs    =       5,429
No. of failures      =           96
Time at risk         =  2306.483231
                                                Wald chi2(48)    =    19624.57
Log pseudolikelihood =   -467.17455             Prob > chi2      =      0.0000

                         (Std. Err. adjusted for 949 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.140632   .4952208     0.30   0.762     .4870624    2.671198
 DS and LDR  |   1.521815   .6304979     1.01   0.311     .6756215    3.427838
CP but no..  |   .9006786   .3717277    -0.25   0.800     .4011089    2.022448
 CP and LDR  |   1.034617   .4678245     0.08   0.940     .4264716    2.509971
LD with n..  |   1.318394   .3803449     0.96   0.338     .7489986    2.320648
             |
    agebroad |
     65-<75  |   .2398197   .2184684    -1.57   0.117     .0402222    1.429893
        75+  |   .1783436   .1771705    -1.74   0.083     .0254481    1.249857
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |   1.954812   2.591567     0.51   0.613     .1454238    26.27693
DS but no.. #|
        75+  |    3.75959   3.664507     1.36   0.174     .5565016    25.39888
 DS and LDR #|
     65-<75  |   2.18e-15   1.90e-15   -38.58   0.000     3.91e-16    1.21e-14
 DS and LDR #|
        75+  |   1.071109    1.31201     0.06   0.955     .0970936    11.81618
CP but no.. #|
     65-<75  |   3.450536   3.955713     1.08   0.280     .3648082    32.63687
CP but no.. #|
        75+  |   1.654284   1.922949     0.43   0.665     .1694997    16.14549
 CP and LDR #|
     65-<75  |   9.917889    9.81765     2.32   0.020     1.425019    69.02681
 CP and LDR #|
        75+  |   3.480357   3.636161     1.19   0.233     .4490728    26.97309
LD with n.. #|
     65-<75  |   1.773441   1.739905     0.58   0.559     .2592456    12.13171
LD with n.. #|
        75+  |   .9675686   .9095544    -0.04   0.972     .1532912    6.107259
             |
        age1 |    1.06966   .0928355     0.78   0.438     .9023397    1.268006
        age2 |   .8583845   .1744475    -0.75   0.452     .5763604    1.278408
        age3 |   1.557384   .8173125     0.84   0.399     .5567835    4.356171
        male |   .8708577   .1845105    -0.65   0.514     .5749119    1.319147
             |
 ethnicity_5 |
      Mixed  |   2.600844   .9477966     2.62   0.009      1.27327    5.312613
Asian or ..  |   2.160092   .8078101     2.06   0.039     1.037883    4.495689
      Black  |   1.541482   .6116183     1.09   0.275     .7082795    3.354843
      Other  |    2.22236   .8347931     2.13   0.034     1.064325    4.640388
             |
     obese40 |   .8932857   .2502831    -0.40   0.687     .5158204    1.546971
 respiratory |   .8667049   .2298499    -0.54   0.590     .5153862    1.457504
asthma_sev~e |   .8773797   .3202948    -0.36   0.720     .4289922    1.794427
     cardiac |   .9634458   .2434173    -0.15   0.883     .5871767    1.580832
          af |    .943501   .2321381    -0.24   0.813     .5825237    1.528168
      dvt_pe |   .7135867   .1974638    -1.22   0.223     .4148605    1.227415
             |
     diabcat |
Controlle..  |   1.354499    .387322     1.06   0.289     .7733495    2.372366
Uncontrol..  |   .6460187   .4670211    -0.60   0.546     .1566364    2.664387
Diabetes,..  |   1.10e-15   9.69e-16   -39.23   0.000     1.98e-16    6.17e-15
             |
       liver |   1.196562   .2801449     0.77   0.443     .7562193    1.893314
      stroke |   .7809783   .2352273    -0.82   0.412     .4327736    1.409344
         tia |   .6972457   .1951517    -1.29   0.198     .4028502     1.20678
    dementia |   1.082795   .2766576     0.31   0.756     .6562381    1.786615
             |
    kidneyfn |
Stage 3a/..  |   2.751125   1.810913     1.54   0.124     .7572015    9.995605
Stage 4/5..  |   .5617472   .2092088    -1.55   0.122     .2707274    1.165601
             |
      spleen |   1.204584   .2548051     0.88   0.379     .7957609    1.823439
  transplant |   1.279575   .3308384     0.95   0.340     .7708764    2.123962
    dialysis |    1.34169   .5437063     0.73   0.468     .6063331    2.968882
immunosupp~n |   1.072888   .2365518     0.32   0.750     .6964345    1.652831
  cancerHaem |   .8830689   .0877368    -1.25   0.211     .7268151    1.072915
  autoimmune |   .9795285    .266393    -0.08   0.939     .5748095    1.669207
         ibd |   1.249037   .2957972     0.94   0.348     .7852241    1.986813
cancerExha~r |    2.26225   2.422081     0.76   0.446     .2774601    18.44508
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'") ///
>                         ("Confounders+Comorb")                               
>            ///
>                         (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )             ///
>                                         ("Confounders+Comorb")               
>                            ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .8018761   1.257172     0.64   0.524    -1.662136    3.265888
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.455892   .8703141     1.67   0.094    -.2498923    3.161676
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -33.34183   .7737183   -43.09   0.000    -34.85829   -31.82537
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .4885986   1.157836     0.42   0.673    -1.780717    2.757915
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.133923   1.014561     1.12   0.264    -.8545802    3.122426
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .3987615   1.101673     0.36   0.717    -1.760479    2.558002
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   2.328371   .9358117     2.49   0.013     .4942138    4.162528
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.281166   .9469518     1.35   0.176    -.5748257    3.137157
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .8493355   .9443234     0.90   0.368    -1.001504    2.700175
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2434452   .8835424     0.28   0.783    -1.488266    1.975157
------------------------------------------------------------------------------

.         
.         * All variables
.         stcox i.`exp'##i.agebroad age1 age2 age3 male           ///
>                                 i.ethnicity_5 imd resid_care_ldr             
>    ///
>                                 obese40                                      
>                            ///
>                                 respiratory asthma_severe                    
>            ///
>                                 cardiac af dvt_pe i.diabcat                  
>            ///
>                                 liver stroke tia dementia                    
>            ///
>                                 i.kidneyfn                                   
>                            ///
>                                 spleen transplant dialysis                   
>            ///
>                                 immunosuppression cancerHaem                 
>    ///
>                                 autoimmune ibd cancerExhaem1yr,              
>    ///
>                                 strata(stpcode) cluster(household_id) 

         failure _d:  coviddeath2
   analysis time _t:  stime_coviddeath2/365.25

Iteration 0:   log pseudolikelihood = -488.07844
Iteration 1:   log pseudolikelihood = -475.07012
Iteration 2:   log pseudolikelihood = -467.48787
Iteration 3:   log pseudolikelihood = -466.83771
Iteration 4:   log pseudolikelihood = -466.79675
Iteration 5:   log pseudolikelihood = -466.78857
Iteration 6:   log pseudolikelihood = -466.78557
Iteration 7:   log pseudolikelihood = -466.78447
Iteration 8:   log pseudolikelihood = -466.78406
Iteration 9:   log pseudolikelihood = -466.78391
Iteration 10:  log pseudolikelihood = -466.78386
Iteration 11:  log pseudolikelihood = -466.78384
Iteration 12:  log pseudolikelihood = -466.78383
Iteration 13:  log pseudolikelihood = -466.78383
Iteration 14:  log pseudolikelihood = -466.78383
Iteration 15:  log pseudolikelihood = -466.78383
Iteration 16:  log pseudolikelihood = -466.78383
Iteration 17:  log pseudolikelihood = -466.78383
Iteration 18:  log pseudolikelihood = -466.78383
Iteration 19:  log pseudolikelihood = -466.78383
Iteration 20:  log pseudolikelihood = -466.78383
Iteration 21:  log pseudolikelihood = -466.78383
Iteration 22:  log pseudolikelihood = -466.78383
Iteration 23:  log pseudolikelihood = -466.78383
Iteration 24:  log pseudolikelihood = -466.78383
Iteration 25:  log pseudolikelihood = -466.78383
Iteration 26:  log pseudolikelihood = -466.78383
Iteration 27:  log pseudolikelihood = -466.78383
Iteration 28:  log pseudolikelihood = -466.78383
Iteration 29:  log pseudolikelihood = -466.78383
Iteration 30:  log pseudolikelihood = -466.78383
Iteration 31:  log pseudolikelihood = -466.78383
Iteration 32:  log pseudolikelihood = -466.78383
Iteration 33:  log pseudolikelihood = -466.78383
Refining estimates:
Iteration 0:   log pseudolikelihood = -466.78383
Iteration 1:   log pseudolikelihood = -466.78383
Iteration 2:   log pseudolikelihood = -466.78383

Stratified Cox regr. -- no ties

No. of subjects      =        5,429             Number of obs    =       5,429
No. of failures      =           96
Time at risk         =  2306.483231
                                                Wald chi2(50)    =    19810.52
Log pseudolikelihood =   -466.78383             Prob > chi2      =      0.0000

                         (Std. Err. adjusted for 949 clusters in household_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   ldr_group |
DS but no..  |   1.142793   .4954747     0.31   0.758     .4885587    2.673121
 DS and LDR  |   1.510767   .6237062     1.00   0.318     .6726462     3.39319
CP but no..  |   .8929381   .3689875    -0.27   0.784     .3972652    2.007068
 CP and LDR  |   1.032406   .4662979     0.07   0.944     .4259867    2.502104
LD with n..  |   1.318851   .3805124     0.96   0.337     .7492184    2.321575
             |
    agebroad |
     65-<75  |    .243204   .2224885    -1.55   0.122     .0404829    1.461064
        75+  |   .1822505   .1827877    -1.70   0.090     .0255246    1.301306
             |
   ldr_group#|
    agebroad |
DS but no.. #|
     65-<75  |    1.96141   2.600038     0.51   0.611      .145955    26.35833
DS but no.. #|
        75+  |   3.637872    3.56483     1.32   0.188     .5330114    24.82895
 DS and LDR #|
     65-<75  |   8.15e-16   7.17e-16   -39.47   0.000     1.45e-16    4.58e-15
 DS and LDR #|
        75+  |   1.064491   1.276132     0.05   0.958      .101556     11.1578
CP but no.. #|
     65-<75  |   3.496121   4.017993     1.09   0.276     .3675569    33.25434
CP but no.. #|
        75+  |   1.645679   1.901794     0.43   0.666     .1708724     15.8496
 CP and LDR #|
     65-<75  |   9.882252   9.841137     2.30   0.021     1.403446    69.58506
 CP and LDR #|
        75+  |   3.478637   3.616438     1.20   0.230     .4534074    26.68884
LD with n.. #|
     65-<75  |   1.777505   1.753556     0.58   0.560     .2570855    12.28978
LD with n.. #|
        75+  |   .9941498   .9332687    -0.01   0.995     .1578983    6.259308
             |
        age1 |   1.069388   .0929756     0.77   0.440     .9018398    1.268064
        age2 |   .8596332   .1749766    -0.74   0.457     .5768366    1.281072
        age3 |   1.548188    .813513     0.83   0.406      .552777     4.33608
        male |   .8730129    .184939    -0.64   0.521     .5763711    1.322328
             |
 ethnicity_5 |
      Mixed  |    2.61605   .9518678     2.64   0.008     1.282125    5.337791
Asian or ..  |   2.162433   .8139354     2.05   0.040     1.034075    4.522027
      Black  |   1.539325   .6116387     1.09   0.278     .7064996    3.353888
      Other  |   2.226292   .8342496     2.14   0.033     1.068107    4.640337
             |
         imd |   1.065936   .0994908     0.68   0.494     .8877336    1.279909
resid_care~r |   .7874821   .3441874    -0.55   0.585     .3343514    1.854719
     obese40 |   .8878267   .2483543    -0.43   0.671     .5131202    1.536163
 respiratory |   .8631618   .2301063    -0.55   0.581     .5118873    1.455493
asthma_sev~e |   .8781895   .3204464    -0.36   0.722     .4295261    1.795506
     cardiac |    .954872   .2410529    -0.18   0.855     .5821881    1.566127
          af |    .949182   .2334165    -0.21   0.832     .5861756    1.536991
      dvt_pe |   .7138485   .1979732    -1.22   0.224     .4145152    1.229339
             |
     diabcat |
Controlle..  |   1.363474   .3900176     1.08   0.278     .7783293    2.388529
Uncontrol..  |   .6546596   .4733995    -0.59   0.558      .158669     2.70109
Diabetes,..  |   3.94e-16   3.57e-16   -39.11   0.000     6.65e-17    2.33e-15
             |
       liver |   1.203449   .2808718     0.79   0.427     .7616697    1.901467
      stroke |   .7767212   .2350631    -0.83   0.404      .429202    1.405622
         tia |   .6953552   .1943855    -1.30   0.194     .4020264    1.202704
    dementia |   1.082638   .2750008     0.31   0.755     .6580666    1.781136
             |
    kidneyfn |
Stage 3a/..  |   2.739244   1.713422     1.61   0.107     .8038898    9.333941
Stage 4/5..  |   .5618112   .2102195    -1.54   0.123     .2698276    1.169754
             |
      spleen |   1.204173    .254955     0.88   0.380      .795183     1.82352
  transplant |    1.27536   .3319351     0.93   0.350     .7657593    2.124091
    dialysis |    1.34245   .5448058     0.73   0.468     .6059759    2.973999
immunosupp~n |   1.073433   .2378748     0.32   0.749     .6952594    1.657306
  cancerHaem |   .8835726   .0878051    -1.25   0.213     .7272004     1.07357
  autoimmune |   .9715175   .2647706    -0.11   0.916      .569469    1.657415
         ibd |   1.259029   .2989423     0.97   0.332      .790547    2.005137
cancerExha~r |   2.303343   2.480456     0.77   0.438     .2790646    19.01133
------------------------------------------------------------------------------
                                                         Stratified by stpcode

.         forvalues k = `lo_`exp'' (1) `hi_`exp'' {
  2.                 capture qui di _b[`k'.`exp']
  3.                 if _rc==0 {
  4.                         post `ldrresults' (`i') ("`out'") ("`exp'")     //
> /
>                         ("All")                                              
>                                    ///
>                         (`k') (1) (_b[`k'.`exp']) (_se[`k'.`exp'])
  5.                 }
  6.                                 forvalues l = 2 (1) 3 {
  7.                         capture qui di _b[`k'.`exp'#`l'.agebroad]
  8.                         if _rc==0 {
  9.                             lincom `k'.`exp' + `k'.`exp'#`l'.agebroad
 10.                                 post `ldrresults' (`i') ("`out'") ("`exp'"
> )     ///
>                                         ("All")                              
>                                    ///
>                                         (`k') (`l') (r(estimate)) (r(se))
 11.                         }
 12.                 }
 13.         }

 ( 1)  0b.ldr_group + 0b.ldr_group#2o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  0b.ldr_group + 0b.ldr_group#3o.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |          0  (omitted)
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .8071391   1.258165     0.64   0.521    -1.658818    3.273097
------------------------------------------------------------------------------

 ( 1)  1.ldr_group + 1.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.424874   .8791947     1.62   0.105    -.2983156    3.148064
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |  -34.33077   .7874321   -43.60   0.000    -35.87411   -32.78743
------------------------------------------------------------------------------

 ( 1)  2.ldr_group + 2.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .475114   1.133318     0.42   0.675    -1.746148    2.696376
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.138416    1.01777     1.12   0.263     -.856377    3.133209
------------------------------------------------------------------------------

 ( 1)  3.ldr_group + 3.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .384915   1.094629     0.35   0.725    -1.760519    2.530349
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   2.322633   .9402847     2.47   0.014     .4797088    4.165557
------------------------------------------------------------------------------

 ( 1)  4.ldr_group + 4.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   1.278533   .9403523     1.36   0.174    -.5645236     3.12159
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#2.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .8519712   .9505196     0.90   0.370    -1.011013    2.714955
------------------------------------------------------------------------------

 ( 1)  5.ldr_group + 5.ldr_group#3.agebroad = 0

------------------------------------------------------------------------------
          _t |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |   .2708932   .8816653     0.31   0.759    -1.457139    1.998925
------------------------------------------------------------------------------

. 
. postclose `ldrresults'

. 
. use `ldrfile', clear

. 
. 
. *************************
. *  Tidy output for HRs  *
. *************************
. 
. * Outcome
. rename outcome out

. gen outcome     = 1 if out=="coviddeath"

. replace outcome = 2 if out=="covidadmission"
(0 real changes made)

. replace outcome = 3 if out=="composite"
(0 real changes made)

. 
. label define outcome    1 "COVID-19 death"              ///
>                                                 2 "COVID-19 admission"  ///
>                                                 3 "Composite"

. label values outcome outcome

. drop out

. 
. * Exposure
. rename exposure exp

. gen     exposure = 1 if exp=="ldr"
(90 missing values generated)

. replace exposure = 2 if exp=="ldr_cat"
(0 real changes made)

. replace exposure = 3 if exp=="ldr_carecat"
(0 real changes made)

. replace exposure = 4 if exp=="ds"
(0 real changes made)

. replace exposure = 5 if exp=="cp"
(0 real changes made)

. replace exposure = 6 if exp=="ldr_group"
(90 real changes made)

. 
. label define exposure   1 "Learning disability register"        ///
>                                                 2 "LDR Severe vs mild"       
>                    ///
>                                                 3 "LDR by residential care"  
>                    ///
>                                                 4 "Down's syndrome"          
>                            ///
>                                                 5 "Cerebral Palsy"           
>                            ///
>                                                 6 "Combined grouping"        
>                    

. label values exposure exposure                                          

. drop exp

. 
. * Age categories
. label define agebroad   1 "16-<65"              ///
>                                                 2 "65-<75"              ///
>                                                 3 "75+"

. label values agebroad agebroad

. 
. 
. * Categories of exposure
. gen category     = "No"                                         if expcat==0
(75 missing values generated)

. replace category = "Yes"                                        if inlist(exp
> osure, 1, 4, 5) & expcat==1
(0 real changes made)

. 
. replace category = "LDR, mild"                          if inlist(exposure, 2
> ) & expcat==1
(0 real changes made)

. replace category = "LDR, profound"                      if inlist(exposure, 2
> ) & expcat==2
(0 real changes made)

. 
. replace category = "LDR, community"             if inlist(exposure, 3) & expc
> at==1
(0 real changes made)

. replace category = "LDR, residential care"      if inlist(exposure, 3) & expc
> at==2
(0 real changes made)

. 
. replace category = "DS but not LDR"             if inlist(exposure, 6) & expc
> at==1
variable category was str2 now str14
(15 real changes made)

. replace category = "DS and LDR"                         if inlist(exposure, 6
> ) & expcat==2
(15 real changes made)

. replace category = "CP but not LDR"             if inlist(exposure, 6) & expc
> at==3
(15 real changes made)

. replace category = "CP and LDR"                         if inlist(exposure, 6
> ) & expcat==4
(15 real changes made)

. replace category = "LDR with no DS or CP"       if inlist(exposure, 6) & expc
> at==5
variable category was str14 now str20
(15 real changes made)

. 
. * Model adjustment
. gen     adjustment = 1 if model=="Confounders"
(72 missing values generated)

. replace adjustment = 2 if model=="Confounders+IMD"
(18 real changes made)

. replace adjustment = 3 if model=="Confounders+Resid"
(18 real changes made)

. replace adjustment = 4 if model=="Confounders+Comorb"
(18 real changes made)

. replace adjustment = 5 if model=="All"
(18 real changes made)

. label define adj        1 "Confounders"                                      
>    ///     
>                                         2 "Confounders with IMD"             
>            ///
>                                         3 "Confounders with care"            
>            ///
>                                         4 "Confounders with comorbidities"   
>    ///
>                                         5 "All"

. label values adjustment adj

. drop model

. 
. * Hazard ratio with 95% confidence interval
. gen cl = exp(lnhr - invnorm(0.975)*sehr)

. gen cu = exp(lnhr + invnorm(0.975)*sehr)

. gen hr = exp(lnhr)

. 
. gen hr_ci =   string(round(hr, 0.01)) + " (" ///
>                         + string(round(cl, 0.01)) + ", " ///
>                         + string(round(cu, 0.01)) + ")"

. replace hr_ci = "" if expcat==0
(15 real changes made)

. drop cl cu hr lnhr sehr

. 
. * Put in wide format
. reshape wide hr_ci, i(wave outcome exposure expcat agebroad) j(adjust)
(note: j = 1 2 3 4 5)

Data                               long   ->   wide
-----------------------------------------------------------------------------
Number of obs.                       90   ->      18
Number of variables                   8   ->      11
j variable (5 values)        adjustment   ->   (dropped)
xij variables:
                                  hr_ci   ->   hr_ci1 hr_ci2 ... hr_ci5
-----------------------------------------------------------------------------

. rename hr_ci1 hr_conf

. rename hr_ci2 hr_conf_imd

. rename hr_ci3 hr_conf_resid

. rename hr_ci4 hr_conf_comorb

. 
. 
. order wave outcome exposure agebroad category hr*

. sort wave outcome exposure agebroad expcat

. 
. * Save data
. outsheet using "output/ldcox_inter_wave`i'_`out'_`exp'", replace
(note: file output/ldcox_inter_wave2_coviddeath_ldr_group.out not found)

. 
. log close
      name:  <unnamed>
       log:  /workspace/logs/AL006_cox_regression_inter_wave2_coviddeath_ldr_gr
> oup.log
  log type:  text
 closed on:  25 Feb 2021, 20:24:32
-------------------------------------------------------------------------------
